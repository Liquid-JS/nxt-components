import{c as T,d as v}from"./chunk-5CCRMC6C.js";import{$ as c,Ic as I,P as u,Y as f,ba as s,fb as l,gb as a,i as p,kb as d,la as h,ra as g,uc as m}from"./chunk-QI4V3FBZ.js";var O=new c("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:b});function b(){let n=s(h)?.location,t=s(I,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:r=>{let e=(n?n.origin:"").replace(/\/+$/igm,"");if(r.startsWith("/"))return e+r;let i=t??e;return i&&(i+="/"),i+r}}}function y(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(n)}var D=new c("NXT_GIST_OPTIONS");var F=(()=>{let t=class t{constructor(){this.http=s(v),this.options=s(D,{optional:!0})}getCodeFromGist(e){let i;return this.options?.clientId&&this.options?.clientSecret&&(i=new T().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${e}`,{params:i,responseType:"json"})}getCodeFromUrl(e){return this.fetchFile(e,{responseType:"text"})}fetchFile(e,i){return y(e)?this.http.get(e,i).pipe(u(1)):p}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),A=(()=>{let t=class t{constructor(){this.location=s(O),this.loader=s(F)}transform(e){return this.loader.getCodeFromUrl(y(e)?e:this.location.formatPathname(e))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=a({name:"codeFromUrl",type:t,pure:!0});let n=t;return n})(),k=(()=>{let t=class t{constructor(){this.loader=s(F),this.pendingTasks=s(g),this.cdRef=s(m),this.gistLoad=new d,this.gistError=new d}set gist(e){if(this.subscription?.unsubscribe(),this.subscription=void 0,e){let i=this.pendingTasks.add();this.subscription=this.loader.getCodeFromGist(e).subscribe({next:o=>{this.gistLoad.emit(o),this.cdRef.detectChanges(),i()},error:o=>{this.gistError.emit(o),this.cdRef.detectChanges(),i()}})}}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=void 0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=l({type:t,selectors:[["","nxtGist",""]],inputs:{gist:[0,"nxtGist","gist"]},outputs:{gistLoad:"gistLoad",gistError:"gistError"}});let n=t;return n})(),U=(()=>{let t=class t{transform(e,i){if(i)return e?.files?.[i]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=a({name:"gistFile",type:t,pure:!0});let n=t;return n})();export{D as a,A as b,k as c,U as d};
