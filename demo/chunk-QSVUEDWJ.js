import{c as g,d as O}from"./chunk-IH6D5Y5T.js";import{d as h}from"./chunk-TX4C3MXD.js";import{g as E}from"./chunk-NFVYWR7O.js";import{$ as r,N as I,W as y,Z as f,c as v,i as T,ja as F,nb as M,ra as D}from"./chunk-RZACWGXF.js";import{a as l,b as u,e as m}from"./chunk-FBFWB55K.js";var P=new f("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:x});function x(){let e=r(F)?.location,o=r(E,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:t=>{let i=(e?e.origin:"").replace(/\/+$/igm,"");if(t.startsWith("/"))return i+t;let n=o??i;return n&&(n+="/"),n+t}}}function j(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(e)}var G=new f("NXT_GIST_OPTIONS");var d=(()=>{class e{constructor(){this.http=r(O),this.options=r(G,{optional:!0}),this.pendingTasks=r(D)}getCodeFromGist(t){let i;return this.options?.clientId&&this.options?.clientSecret&&(i=new g().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:i,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}fetchFile(t,i){return j(t)?this.http.get(t,i).pipe(n=>new v(c=>{let a=this.pendingTasks.add(),s=n.subscribe({next:p=>{c.next(p),a()},error:p=>{c.error(p),console.log(p),a()},complete:()=>c.complete()});return s.add(()=>a()),s}),I(1)):T}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function V(e,i={}){var n=i,{formatUrl:o}=n,t=m(n,["formatUrl"]);let c=t?.injector?t.injector.get(d):r(d),a=t?.injector?t.injector.get(P):r(P);return h(u(l({},t),{params:()=>{let s=typeof e=="string"?e:e();return j(s)?s:a.formatPathname(s)},stream:({params:s})=>c.fetchFile(s,{responseType:"text"})}))}function W(e,o){let t=o?.injector?o.injector.get(d):r(d);return h(u(l({},o),{params:()=>typeof e=="string"?e:e(),stream:({params:i})=>{let n;return t.options?.clientId&&t.options?.clientSecret&&(n=new g().set("client_id",t.options.clientId).set("client_secret",t.options.clientSecret)),t.fetchFile(`https://api.github.com/gists/${i}`,{params:n,responseType:"json"})}}))}var q=(()=>{class e{transform(t,i){if(i)return t?.files?.[i]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=M({name:"gistFile",type:e,pure:!0})}}return e})();export{V as a,W as b,q as c};
