import{c as g,d as G}from"./chunk-IH6D5Y5T.js";import{d as h}from"./chunk-TX4C3MXD.js";import{g as D}from"./chunk-NFVYWR7O.js";import{$ as n,N as T,W as y,Z as f,c as v,i as F,ja as I,nb as P,ra as M}from"./chunk-RZACWGXF.js";import{a as l,b as u,e as m}from"./chunk-FBFWB55K.js";var x=new f("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:O});function O(){let e=n(I)?.location,s=n(D,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:t=>{let i=(e?e.origin:"").replace(/\/+$/igm,"");if(t.startsWith("/"))return i+t;let r=s??i;return r&&(r+="/"),r+t}}}function E(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(e)}var j=new f("NXT_GIST_OPTIONS");var d=(()=>{class e{constructor(){this.http=n(G),this.options=n(j,{optional:!0}),this.pendingTasks=n(M)}getCodeFromGist(t){let i;return this.options?.clientId&&this.options?.clientSecret&&(i=new g().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${t}`,{params:i,responseType:"json"})}getCodeFromUrl(t){return this.fetchFile(t,{responseType:"text"})}fetchFile(t,i){return E(t)?this.http.get(t,i).pipe(r=>new v(c=>{let a=this.pendingTasks.add(),o=r.subscribe({next:p=>{c.next(p),a()},error:p=>{c.error(p),console.log(p),a()},complete:()=>c.complete()});return o.add(()=>a()),o}),T(1)):F}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function V(e,i={}){var r=i,{formatUrl:s}=r,t=m(r,["formatUrl"]);let c=t?.injector?t.injector.get(d):n(d),a=t?.injector?t.injector.get(x):n(x);return h(u(l({},t),{params:()=>{let o=typeof e=="string"?e:e();return E(o)?o:a.formatPathname(o)},stream:({params:o})=>c.fetchFile(o,{responseType:"text"})}))}function W(e,s){let t=s?.injector?s.injector.get(d):n(d);return h(u(l({},s),{params:()=>typeof e=="string"?e:e(),stream:({params:i})=>{let r;return t.options?.clientId&&t.options?.clientSecret&&(r=new g().set("client_id",t.options.clientId).set("client_secret",t.options.clientSecret)),t.fetchFile(`https://api.github.com/gists/${i}`,{params:r,responseType:"json"})}}))}var q=(()=>{class e{transform(t,i){if(i)return t?.files?.[i]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=P({name:"gistFile",type:e,pure:!0})}}return e})();export{V as a,W as b,q as c};
