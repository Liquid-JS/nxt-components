import{f as at,l as St}from"./chunk-QX3OSLPD.js";import{k as Vt,o as Ot}from"./chunk-OWF3LYDB.js";import{Ab as lt,Bb as u,Cb as _,Cc as It,Db as d,Eb as N,Ib as vt,Jb as bt,Lb as w,Qb as Y,Rb as h,Sa as B,Ta as C,U as gt,Ub as l,bb as A,ca as s,da as c,db as kt,dc as v,ea as nt,fc as Pt,ga as mt,ib as xt,ka as b,kb as Z,oc as O,pc as yt,qc as Mt,sa as ft,tb as wt,va as G,vb as k,wb as x,yb as ot,zb as rt}from"./chunk-Q24A7GIH.js";import{a as ht,b as ut}from"./chunk-FBFWB55K.js";var V=class{constructor(r,t,n,i,o,a=!0){this.c=r,this.m=t,this.y=n,this.k=i,this.a=o,this.normalized=a}},T=class{constructor(r,t,n,i,o=!0){this.h=r,this.s=t,this.l=n,this.a=i,this.normalized=o}},M=class{constructor(r,t,n,i,o=!0){this.h=r,this.s=t,this.v=n,this.a=i,this.normalized=o}},m=class{constructor(r,t,n,i,o=!0){this.r=r,this.g=t,this.b=n,this.a=i,this.normalized=o}},P=(function(e){return e.hex="hex",e.rgba="rgba",e.hsla="hsla",e.cmyk="cmyk",e})(P||{}),jt=new Set([P.hsla,P.rgba,P.cmyk]),I=(function(e){return e.auto="auto",e.hex="hex",e.rgba="rgba",e.hsla="hsla",e})(I||{}),y=(function(e){return e.enabled="enabled",e.disabled="disabled",e.always="always",e.forced="forced",e})(y||{}),E=(function(e){return e.auto="auto",e.top="top",e.left="left",e.right="right",e.bottom="bottom",e})(E||{}),S=(function(e){return e.popup="popup",e.inline="inline",e})(S||{});function g(e,r,t){return Math.min(t,Math.max(e,r))}function $(e){e=Rt(e);let r=e.h,t=e.s,n=e.v,i=e.a;if(n==0)return new T(r,0,0,i,!0);if(t==0&&n==1)return new T(r,1,1,i,!0);{let o=n*(2-t)/2;return new T(r,n*t/(1-Math.abs(2*o-1)),o,i,!0)}}function Q(e){e=Xt(e);let r=Math.min(e.h,1),t=Math.min(e.s,1),n=Math.min(e.l,1),i=Math.min(e.a,1);if(n==0)return new M(r,0,0,i,!0);{let o=n+t*(1-Math.abs(2*n-1))/2;return new M(r,2*(o-n)/o,o,i,!0)}}function D(e){e=Rt(e);let r,t,n,i=e.h,o=e.s,a=e.v,p=e.a,f=Math.floor(i*6),R=i*6-f,F=a*(1-o),X=a*(1-R*o),it=a*(1-(1-R)*o);switch(f%6){case 0:r=a,t=it,n=F;break;case 1:r=X,t=a,n=F;break;case 2:r=F,t=a,n=it;break;case 3:r=F,t=X,n=a;break;case 4:r=it,t=F,n=a;break;case 5:r=a,t=F,n=X;break;default:r=0,t=0,n=0}return new m(r,t,n,p,!0)}function W(e){e=L(e);let r=1-Math.max(e.r,e.g,e.b);if(r==1)return new V(0,0,0,1,e.a,!0);{let t=(1-e.r-r)/(1-r),n=(1-e.g-r)/(1-r),i=(1-e.b-r)/(1-r);return new V(t,n,i,r,e.a,!0)}}function z(e){e=L(e);let r,t=Math.min(e.r,1),n=Math.min(e.g,1),i=Math.min(e.b,1),o=Math.min(e.a,1),a=Math.max(t,n,i),p=Math.min(t,n,i),f=a,R=a-p,F=a==0?0:R/a;if(a==p)r=0;else{switch(a){case t:r=(n-i)/R+(n<i?6:0);break;case n:r=(i-t)/R+2;break;case i:r=(t-n)/R+4;break;default:r=0}r/=6}return new M(r,F,f,o,!0)}function Ft(e,r){e=q(e);let t="#"+(1<<24|Math.round(e.r)<<16|Math.round(e.g)<<8|Math.round(e.b)).toString(16).substring(1);return r&&(t+=(256|g(Math.round(e.a*255),0,255)).toString(16).substring(1)),t}function At(e){e=zt(e);let r=(1-e.c)*(1-e.k),t=(1-e.m)*(1-e.k),n=(1-e.y)*(1-e.k);return new m(r,t,n,e.a,!0)}function zt(e){return e.normalized?e:new V(g(e.c/100,0,1),g(e.m/100,0,1),g(e.y/100,0,1),g(e.k/100,0,1),g(e.a,0,1),!0)}function Nt(e){return e.normalized?new V(g(e.c*100,0,100),g(e.m*100,0,100),g(e.y*100,0,100),g(e.k*100,0,100),g(e.a,0,1),!1):e}function L(e){return e.normalized?e:new m(g(e.r/255,0,1),g(e.g/255,0,1),g(e.b/255,0,1),g(e.a,0,1),!0)}function q(e){return e.normalized?new m(g(e.r*255,0,255),g(e.g*255,0,255),g(e.b*255,0,255),g(e.a,0,1),!1):e}function Rt(e){return e.normalized?e:new M(g(e.h/360,0,1),g(e.s/100,0,1),g(e.v/100,0,1),g(e.a,0,1),!0)}function Xt(e){return e.normalized?e:new T(g(e.h/360,0,1),g(e.s/100,0,1),g(e.l/100,0,1),g(e.a,0,1),!0)}function Bt(e){return e.normalized?new T(g(e.h*360,0,360),g(e.s*100,0,100),g(e.l*100,0,100),g(e.a,0,1),!1):e}function K(e="",r=!1){let t;e=(e||"").toLowerCase();let n=[{re:/(cmyk)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new V(parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4])/100,parseFloat(i[5])/100,isNaN(parseFloat(i[6]))?1:parseFloat(i[6]),!0)},{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new m(parseFloat(i[2])/255,parseFloat(i[3])/255,parseFloat(i[4])/255,isNaN(parseFloat(i[5]))?1:parseFloat(i[5]),!0)},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new T(parseFloat(i[2])/360,parseFloat(i[3])/100,parseFloat(i[4])/100,isNaN(parseFloat(i[5]))?1:parseFloat(i[5]),!0)}];r?n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:i=>new m(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,parseInt(i[4]||"FF",16)/255,!0)}):n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:i=>new m(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,1,!0)}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:i=>new m(parseInt(i[1]+i[1],16)/255,parseInt(i[2]+i[2],16)/255,parseInt(i[3]+i[3],16)/255,1,!0)});for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],a=o.re.exec(e),p=a&&o.parse(a);if(p)return p instanceof m?t=z(p):p instanceof T?t=Q(p):p instanceof V?t=z(At(p)):t=p,t}return t}function Tt(e="",r=!1){let t;e=(e||"").toLowerCase();let n=[{re:/(cmyk)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new V(parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4])/100,parseFloat(i[5])/100,isNaN(parseFloat(i[6]))?1:parseFloat(i[6]),!0)},{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new m(parseFloat(i[2])/255,parseFloat(i[3])/255,parseFloat(i[4])/255,isNaN(parseFloat(i[5]))?1:parseFloat(i[5]),!0)},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:i=>new T(parseFloat(i[2])/360,parseFloat(i[3])/100,parseFloat(i[4])/100,isNaN(parseFloat(i[5]))?1:parseFloat(i[5]),!0)}];r?n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:i=>new m(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,parseInt(i[4]||"FF",16)/255,!0)}):n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:i=>new m(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,1,!0)}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:i=>new m(parseInt(i[1]+i[1],16)/255,parseInt(i[2]+i[2],16)/255,parseInt(i[3]+i[3],16)/255,1,!0)});for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],a=o.re.exec(e),p=a&&o.parse(a);if(p)return p instanceof m?t=W(p):p instanceof M?t=W(D(p)):p instanceof T?t=W(D(Q(p))):t=p,t}return t}function j(e,r,t){switch(r==I.auto&&(r=e.a<1?I.rgba:I.hex),r){case I.hsla:let n=Bt($(e));return e.a<1||t==y.always?"hsla("+n.h.toFixed(0)+","+n.s.toFixed(0)+"%,"+n.l.toFixed(0)+"%,"+n.a.toFixed(2)+")":"hsl("+n.h.toFixed(0)+","+n.s.toFixed(0)+"%,"+n.l.toFixed(0)+"%)";case I.rgba:let i=q(D(e));return e.a<1||t==y.always?"rgba("+i.r.toFixed(0)+","+i.g.toFixed(0)+","+i.b.toFixed(0)+","+i.a.toFixed(2)+")":"rgb("+i.r.toFixed(0)+","+i.g.toFixed(0)+","+i.b.toFixed(0)+")";default:let o=t==y.always||t==y.forced;return Ft(q(D(e)),o)}}function Gt(e,r){return e=Nt(e),e.a<1||r==y.always?"cmyka("+e.c.toFixed(0)+","+e.m.toFixed(0)+","+e.y.toFixed(0)+","+e.k.toFixed(0)+","+e.a.toFixed(2)+")":"cmyk("+e.c.toFixed(0)+","+e.m.toFixed(0)+","+e.y.toFixed(0)+","+e.k.toFixed(0)+")"}function J(e,r){e=L(e),r=L(r),Math.round(e.a*100)<100&&(e=dt(e,r));let t=Et(e)+.05,n=Et(r)+.05;return Math.max(t,n)/Math.min(t,n)}function dt(e,r){e=L(e),r=L(r);let t=Zt(e.a,r.a),n=st(e.r,e.a,r.r,r.a,t),i=st(e.g,e.a,r.g,r.a,t),o=st(e.b,e.a,r.b,r.a,t);return new m(n,i,o,t,!0)}function Zt(e,r){return 1-(1-r)*(1-e)}function st(e,r,t,n,i){return i==0?0:(e*r+t*n*(1-r))/i}function Et(e){e=L(e);let r=e.r;r=r<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);let t=e.g;t=t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);let n=e.b;return n=n<.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*t+.0722*n}var _t=new m(218,218,218,1,!1),Ht=new m(34,34,34,1,!1);function U(e){let r=J(_t,new m(e.r,e.g,e.b,1,e.normalized)),t=J(Ht,new m(e.r,e.g,e.b,1,e.normalized));return r>t}function Yt(e){let r=dt(e,_t),t=J(_t,new m(r.r,r.g,r.b,1,r.normalized)),n=J(Ht,new m(r.r,r.g,r.b,1,r.normalized));return t>n}var tt=class{constructor(r,t,n,i){this.h=r,this.s=t,this.v=n,this.a=i}};var H=(function(e){return e[e.color=0]="color",e[e.grayscale=1]="grayscale",e[e.presets=2]="presets",e})(H||{});function $t(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":return H.color;case"2":case"G":case"GRAYSCALE":return H.grayscale;case"3":case"P":case"PRESETS":return H.presets;default:return H.color}}function Dt(e){let r=((e||"auto")+"").trim().toLowerCase();if(r.match(/^\d+[a-z%]+$/)||r=="auto")return r;let t=parseInt(r,10);return Number.isNaN(t)?"auto":`${t}px`}function Lt(e){if(e.composedPath)return e.composedPath();let r=e;if(r.path)return r.path;let t=r.target;for(r.path=[];t.parentNode!==null;)r.path.push(t),t=t.parentNode;return r.path.push(document,window),r.path}var Wt=(()=>{class e{constructor(t){this.elRef=t,this.isMoving=!1,this.dragEnd=new b,this.dragStart=new b,this.newValue=new b}onStart(t){t.stopPropagation(),t.preventDefault(),this.setCursor(t),this.isMoving=!0,this.dragStart.emit()}onMove(t){this.isMoving&&(t.stopPropagation(),t.preventDefault(),this.setCursor(t))}onStop(t){this.isMoving&&(t.stopPropagation(),t.preventDefault(),this.isMoving=!1,this.dragEnd.emit())}getX(t){let n=this.elRef.nativeElement.getBoundingClientRect();return("pageX"in t?t.pageX:t.touches[0].pageX)-n.left-window.scrollX}getY(t){let n=this.elRef.nativeElement.getBoundingClientRect();return("pageX"in t?t.pageY:t.touches[0].pageY)-n.top-window.scrollY}setCursor(t){let n=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,o=Math.max(0,Math.min(this.getX(t),n)),a=Math.max(0,Math.min(this.getY(t),i));this.rgX!=null&&this.rgY!=null?this.newValue.emit({s:o/n,v:1-a/i,rgX:this.rgX,rgY:this.rgY}):this.rgX==null&&this.rgY!=null?this.newValue.emit({v:a/i,rgY:this.rgY}):this.rgX!=null&&this.rgY==null&&this.newValue.emit({v:o/n,rgX:this.rgX})}static{this.\u0275fac=function(n){return new(n||e)(A(G))}}static{this.\u0275dir=Z({type:e,selectors:[["","nxtSlider",""]],hostBindings:function(n,i){n&1&&h("mousedown",function(a){return i.onStart(a)})("touchstart",function(a){return i.onStart(a)})("mousemove",function(a){return i.onMove(a)},B)("touchmove",function(a){return i.onMove(a)},B)("mouseup",function(a){return i.onStop(a)},B)("touchend",function(a){return i.onStop(a)},B)},inputs:{rgX:"rgX",rgY:"rgY",slider:[0,"nxtSlider","slider"]},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}})}}return e})(),Kt=(()=>{class e{constructor(){this.newValue=new b}inputChange(t){let n=((t?.target?.value||"")+"").trim();if(this.rg==null)this.newValue.emit(n);else{let i=parseFloat(n);this.newValue.emit({v:i,rg:this.rg})}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=Z({type:e,selectors:[["","nxtText",""]],hostBindings:function(n,i){n&1&&h("input",function(a){return i.inputChange(a)})("change",function(a){return i.inputChange(a)})},inputs:{rg:"rg",text:[0,"nxtText","text"]},outputs:{newValue:"newValue"}})}}return e})(),Ut=(()=>{class e{constructor(){}setActive(t){t&&t.dialogDisplay==S.popup&&(this.active&&this.active!=t&&this.active.closeDialog(),this.active=t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qt=(e,r,t)=>({visibility:e,width:r,height:t}),pt=e=>({backgroundColor:e}),et=e=>({"color-picker__cursor--light":e}),qt=(e,r)=>({top:e,left:r}),Jt=e=>({"color-picker__add-selected--light":e}),Ct=e=>({left:e}),te=e=>({backgroundImage:e});function ee(e,r){e&1&&N(0,"div",4)}function ie(e,r){if(e&1){let t=w();_(0,"div",17),h("newValue",function(i){s(t);let o=l(2);return c(o.onColorChange(i))})("dragStart",function(){s(t);let i=l(2);return c(i.onDragStart("saturation-lightness"))})("dragEnd",function(){s(t);let i=l(2);return c(i.onDragEnd("saturation-lightness"))}),N(1,"div",18),d()}if(e&2){let t=l(2);u("rgX",1)("rgY",1)("ngStyle",O(5,pt,t.hueSliderColor||"")),C(),u("ngClass",O(7,et,t.svSliderLight))("ngStyle",yt(9,qt,((t.slider==null?null:t.slider.v)||0)*100+"%",((t.slider==null?null:t.slider.s)||0)*100+"%"))}}function ne(e,r){if(e&1){let t=w();_(0,"button",19),h("click",function(){s(t);let i=l(2);return c(i.onAddPresetColor(i.selectedColor))}),nt(),_(1,"svg",20),N(2,"path",21)(3,"path",22),d()()}if(e&2){let t=l(2);u("ngClass",O(1,Jt,t.alphaSliderLight))}}function oe(e,r){if(e&1){let t=w();_(0,"div",23),h("newValue",function(i){s(t);let o=l(2);return c(o.onHueChange(i))})("dragStart",function(){s(t);let i=l(2);return c(i.onDragStart("hue"))})("dragEnd",function(){s(t);let i=l(2);return c(i.onDragEnd("hue"))}),N(1,"div",24),d()}if(e&2){let t=l(2);u("rgX",1),C(),u("ngClass",O(3,et,t.hueSliderLight))("ngStyle",O(5,Ct,((t.slider==null?null:t.slider.h)||0)*100+"%"))}}function re(e,r){if(e&1){let t=w();_(0,"div",25),h("newValue",function(i){s(t);let o=l(2);return c(o.onValueChange(i))})("dragStart",function(){s(t);let i=l(2);return c(i.onDragStart("value"))})("dragEnd",function(){s(t);let i=l(2);return c(i.onDragEnd("value"))}),N(1,"div",24),d()}if(e&2){let t=l(2);u("rgX",1),C(),u("ngClass",O(3,et,t.valueSliderLight))("ngStyle",O(5,Ct,(1-((t.slider==null?null:t.slider.v)||0))*100+"%"))}}function le(e,r){if(e&1){let t=w();_(0,"div",26),h("newValue",function(i){s(t);let o=l(2);return c(o.onAlphaChange(i))})("dragStart",function(){s(t);let i=l(2);return c(i.onDragStart("alpha"))})("dragEnd",function(){s(t);let i=l(2);return c(i.onDragEnd("alpha"))}),_(1,"div",27),N(2,"div",24),d()()}if(e&2){let t=l(2);u("rgX",1),C(),u("ngStyle",O(4,te,t.alphaSliderColor||"")),C(),u("ngClass",O(6,et,t.alphaSliderLight))("ngStyle",O(8,Ct,((t.slider==null?null:t.slider.a)||0)*100+"%"))}}function ae(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",33),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onAlphaInput(i))}),d(),_(2,"span",32),v(3,"A"),d()()}if(e&2){let t=l(4);C(),u("rg",1)("value",t.formatAlpha(t.hslaText==null?null:t.hslaText.a))}}function se(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",31),h("keyup.enter",function(i){s(t);let o=l(3);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(3);return c(o.onValueInput(i))}),d(),_(2,"span",32),v(3,"V"),d()(),k(4,ae,4,2,"div",30)}if(e&2){let t=l(3);C(),u("rg",100)("value",t.hslaText==null||t.hslaText.l==null?null:t.hslaText.l.toFixed(0)),C(3),x(t.alphaChannel!="disabled"?4:-1)}}function ce(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",33),h("keyup.enter",function(i){s(t);let o=l(5);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(5);return c(o.onAlphaInput(i))}),d(),_(2,"span",32),v(3,"A"),d()()}if(e&2){let t=l(5);C(),u("rg",1)("value",t.formatAlpha(t.hslaText==null?null:t.hslaText.a))}}function _e(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",34),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onHueInput(i))}),d(),_(2,"span",32),v(3,"H"),d()(),_(4,"div",30)(5,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onSaturationInput(i))}),d(),_(6,"span",32),v(7,"S"),d()(),_(8,"div",30)(9,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onLightnessInput(i))}),d(),_(10,"span",32),v(11,"L"),d()(),k(12,ce,4,2,"div",30)}if(e&2){let t=l(4);C(),u("rg",360)("value",t.hslaText==null||t.hslaText.h==null?null:t.hslaText.h.toFixed(0)),C(4),u("rg",100)("value",t.hslaText==null||t.hslaText.s==null?null:t.hslaText.s.toFixed(0)),C(4),u("rg",100)("value",t.hslaText==null||t.hslaText.l==null?null:t.hslaText.l.toFixed(0)),C(3),x(t.alphaChannel!="disabled"?12:-1)}}function de(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",33),h("keyup.enter",function(i){s(t);let o=l(5);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(5);return c(o.onAlphaInput(i))}),d(),_(2,"span",32),v(3,"A"),d()()}if(e&2){let t=l(5);C(),u("rg",1)("value",t.formatAlpha(t.hslaText==null?null:t.hslaText.a))}}function pe(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",35),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onRedInput(i))}),d(),_(2,"span",32),v(3,"R"),d()(),_(4,"div",30)(5,"input",35),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onGreenInput(i))}),d(),_(6,"span",32),v(7,"G"),d()(),_(8,"div",30)(9,"input",35),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onBlueInput(i))}),d(),_(10,"span",32),v(11,"B"),d()(),k(12,de,4,2,"div",30)}if(e&2){let t=l(4);C(),u("rg",255)("value",t.rgbaText==null||t.rgbaText.r==null?null:t.rgbaText.r.toFixed(0)),C(4),u("rg",255)("value",t.rgbaText==null||t.rgbaText.g==null?null:t.rgbaText.g.toFixed(0)),C(4),u("rg",255)("value",t.rgbaText==null||t.rgbaText.b==null?null:t.rgbaText.b.toFixed(0)),C(3),x(t.alphaChannel!="disabled"?12:-1)}}function Ce(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",33),h("keyup.enter",function(i){s(t);let o=l(5);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(5);return c(o.onAlphaInput(i))}),d(),_(2,"span",32),v(3,"A"),d()()}if(e&2){let t=l(5);C(),u("rg",1)("value",t.formatAlpha(t.cmykText==null?null:t.cmykText.a))}}function he(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onCyanInput(i))}),d(),_(2,"span",32),v(3,"C"),d()(),_(4,"div",30)(5,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onMagentaInput(i))}),d(),_(6,"span",32),v(7,"M"),d()(),_(8,"div",30)(9,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onYellowInput(i))}),d(),_(10,"span",32),v(11,"Y"),d()(),_(12,"div",30)(13,"input",31),h("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onBlackInput(i))}),d(),_(14,"span",32),v(15,"K"),d()(),k(16,Ce,4,2,"div",30)}if(e&2){let t=l(4);C(),u("rg",100)("value",t.cmykText==null||t.cmykText.c==null?null:t.cmykText.c.toFixed(0)),C(4),u("rg",100)("value",t.cmykText==null||t.cmykText.m==null?null:t.cmykText.m.toFixed(0)),C(4),u("rg",100)("value",t.cmykText==null||t.cmykText.y==null?null:t.cmykText.y.toFixed(0)),C(4),u("rg",100)("value",t.cmykText==null||t.cmykText.k==null?null:t.cmykText.k.toFixed(0)),C(3),x(t.alphaChannel!="disabled"?16:-1)}}function ue(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",33),h("keyup.enter",function(i){s(t);let o=l(5);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(5);return c(o.onAlphaInput(i))}),d(),_(2,"span",32),v(3,"A"),d()()}if(e&2){let t=l(5);C(),u("rg",1)("value",t.formatAlpha(t.hexAlpha))}}function ge(e,r){if(e&1){let t=w();_(0,"div",30)(1,"input",36),h("blur",function(){s(t);let i=l(4);return c(i.onHexInput())})("keyup.enter",function(i){s(t);let o=l(4);return c(o.onAccept(i))})("newValue",function(i){s(t);let o=l(4);return c(o.onHexInput(i))}),d(),_(2,"span",32),v(3,"Hex"),d()(),k(4,ue,4,2,"div",30)}if(e&2){let t=l(4);C(),u("value",t.hexText),C(3),x(t.alphaChannel=="forced"?4:-1)}}function me(e,r){if(e&1&&k(0,_e,13,7)(1,pe,13,7)(2,he,17,9)(3,ge,5,2),e&2){let t,n=l(3);x((t=n.format)==="hsla"?0:t==="rgba"?1:t==="cmyk"?2:3)}}function fe(e,r){if(e&1){let t=w();_(0,"div",29)(1,"span",37),h("click",function(){s(t);let i=l(3);return c(i.onFormatToggle(1))})("keydown.enter",function(){s(t);let i=l(3);return c(i.onFormatToggle(1))}),d(),_(2,"span",37),h("click",function(){s(t);let i=l(3);return c(i.onFormatToggle(-1))})("keydown.enter",function(){s(t);let i=l(3);return c(i.onFormatToggle(-1))}),d()()}}function ke(e,r){if(e&1&&(_(0,"div",15)(1,"div",28),k(2,se,5,3)(3,me,4,1),d(),k(4,fe,3,0,"div",29),d()),e&2){let t=l(2);C(2),x(t.mode==t.colorModeInternal.grayscale?2:3),C(2),x(t.mode==t.colorModeInternal.color?4:-1)}}function xe(e,r){e&1&&(vt(0),Y(1,0),bt())}function we(e,r){if(e&1&&v(0),e&2){let t=l(4);Pt(" ",t.presetLabel," ")}}function ve(e,r){if(e&1&&(_(0,"div",40),k(1,xe,2,0,"ng-container")(2,we,1,1),d()),e&2){let t=l(3);C(),x(t.presetLabel===!0?1:2)}}function be(e,r){if(e&1){let t=w();_(0,"button",47),h("click",function(){s(t);let i=l(2).$implicit,o=l(4);return c(o.onRemovePresetColor(i))})("keydown.enter",function(){s(t);let i=l(2).$implicit,o=l(4);return c(o.onRemovePresetColor(i))}),nt(),_(1,"svg",20),N(2,"path",48)(3,"path",22),d()()}}function Pe(e,r){if(e&1){let t=w();_(0,"div",44),h("click",function(){s(t);let i=l().$implicit,o=l(4);return c(o.setColorFromString(i))})("keydown.enter",function(){s(t);let i=l().$implicit,o=l(4);return c(o.setColorFromString(i))}),_(1,"div",45),k(2,be,4,0,"button",46),d()()}if(e&2){let t=l().$implicit,n=l(4);u("title",t),C(),u("ngStyle",O(3,pt,r||"")),C(),x(n.presetColorsEditable?2:-1)}}function ye(e,r){if(e&1&&k(0,Pe,3,5,"div",43),e&2){let t,n=r.$implicit,i=l(4);x((t=i.stringToRgba(n))?0:-1,t)}}function Me(e,r){e&1&&N(0,"div",42)}function Ie(e,r){if(e&1&&(_(0,"div",41),rt(1,ye,1,1,null,null,ot),rt(3,Me,1,0,"div",42,ot),d()),e&2){let t=l(3);C(),lt(t.presetColors),C(2),lt(t.fill(50))}}function Ve(e,r){if(e&1&&(N(0,"div",38),_(1,"div",39),k(2,ve,3,1,"div",40),k(3,Ie,5,0,"div",41),d()),e&2){let t=l(2);C(2),x(t.presetLabel?2:-1),C(),x(t.presetColors!=null&&t.presetColors.length?3:-1)}}function Oe(e,r){if(e&1){let t=w();_(0,"button",50),h("click",function(i){s(t);let o=l(3);return c(o.onCancel(i))}),Y(1,1),d()}}function Se(e,r){if(e&1){let t=w();_(0,"button",50),h("click",function(i){s(t);let o=l(3);return c(o.onAccept(i))}),Y(1,2),d()}}function Te(e,r){if(e&1&&(_(0,"div",16),k(1,Oe,2,0,"button",49),k(2,Se,2,0,"button",49),d()),e&2){let t=l(2);C(),x(t.cancelButton?1:-1),C(),x(t.okButton?2:-1)}}function Ee(e,r){if(e&1&&(_(0,"div",3),k(1,ee,1,0,"div",4),k(2,ie,2,12,"div",5),_(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9),k(7,ne,4,3,"button",10),d()()(),_(8,"div",11),k(9,oe,2,7,"div",12),k(10,re,2,7,"div",13),k(11,le,3,10,"div",14),d()(),k(12,ke,5,2,"div",15),k(13,Ve,4,2),k(14,Te,3,2,"div",16),d()),e&2){let t=l();u("ngStyle",Mt(11,Qt,t.show?"visible":"hidden",t.width||"",t.height||"")),C(),x(t.dialogDisplay=="popup"?1:-1),C(),x(t.mode==t.colorModeInternal.color?2:-1),C(4),u("ngStyle",O(15,pt,t.selectedColor||"")),C(),x(t.presetColorsEditable&&!(t.maxPresetColors&&((t.presetColors==null?null:t.presetColors.length)||0)>=t.maxPresetColors)?7:-1),C(2),x(t.mode==t.colorModeInternal.color?9:-1),C(),x(t.mode==t.colorModeInternal.grayscale?10:-1),C(),x(t.alphaChannel!="disabled"?11:-1),C(),x(!t.disableInput&&(t.mode==t.colorModeInternal.color||t.mode==t.colorModeInternal.grayscale)?12:-1),C(),x(t.presetColors!=null&&t.presetColors.length?13:-1),C(),x(t.okButton||t.cancelButton?14:-1)}}var ct=(()=>{class e{constructor(t,n,i){this.elRef=t,this.cdRef=n,this.service=i,this.colorModeInternal=H,this.cmykColor="",this.outputColor="",this.initialColor="",this.dialogInputFields=[P.hex,P.rgba,P.hsla,P.cmyk],this.show=!1,this.format=P.hex,this.selectedColor="",this.svSliderLight=!1,this.hueSliderLight=!1,this.valueSliderLight=!1,this.alphaSliderLight=!1,this.mode=H.color,this.cmykEnabled=!1,this.alphaChannel=y.enabled,this.outputFormat=I.auto,this.disableInput=!1,this.saveClickOutside=!1,this.closeClickOutside=!1,this.okButton=!1,this.cancelButton=!1,this.presetLabel=!1,this.presetColorsEditable=!1}onCancel(t){t.stopPropagation(),t.preventDefault(),this.initialColor&&this.setColorFromString(this.initialColor,!0),this.callbacks&&this.callbacks.colorSelectCanceled(),this.show&&this.dialogDisplay==S.popup&&this.closeColorPicker()}onAccept(t){t.stopPropagation(),t.preventDefault(),this.show&&this.dialogDisplay==S.popup&&(this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor),this.dialogDisplay==S.popup&&this.closeColorPicker())}onClick(t){t.stopPropagation()}onFocusChange(t){let n=new Set(Lt(t));this.ignoredElements?.find(o=>n.has(o))||(this.show&&this.dialogDisplay==S.popup?(this.saveClickOutside?this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor):(this.setColorFromString(this.initialColor,!1),this.callbacks&&(this.cmykEnabled&&this.callbacks.cmykChanged(this.cmykColor),this.callbacks.colorChanged(this.initialColor))),this.closeClickOutside&&this.closeColorPicker()):this.saveClickOutside&&this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor))}ngOnInit(){this.slider=new tt(0,0,0,0),this.cmykEnabled?this.format=P.cmyk:this.outputFormat==I.rgba?this.format=P.rgba:this.outputFormat==I.hsla?this.format=P.hsla:this.format=P.hex,this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewChecked(){}openDialog(t,n=!0){this.service.setActive(this),this.setInitialColor(t),this.setColorFromString(t,n),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(t){this.setInitialColor(t.color),this.mode=$t(t.mode),this.callbacks=t.callbacks,this.disableInput=t.disableInput,this.cmykEnabled=t.cmykEnabled,this.alphaChannel=t.alphaChannel,this.outputFormat=t.outputFormat,this.dialogDisplay=t.dialogDisplay,this.ignoredElements=[...t.ignoredElements??[],this.elRef&&this.elRef.nativeElement,t.elementRef&&t.elementRef.nativeElement].filter(n=>!!n),this.saveClickOutside=t.saveClickOutside,this.closeClickOutside=t.closeClickOutside,this.width=Dt(t.width),this.height=Dt(t.height),this.okButton=t.okButton,this.cancelButton=t.cancelButton,this.fallbackColor=t.fallbackColor||"#fff",this.setPresetConfig(t.presetLabel,t.presetColors),this.maxPresetColors=t.maxPresetColors,this.presetColorsEditable=t.presetColorsEditable,t.outputFormat==I.hex&&t.alphaChannel!=y.always&&t.alphaChannel!=y.forced&&(this.alphaChannel=y.disabled)}setInitialColor(t){this.initialColor=t,this.setColorFromString(this.initialColor,!1,!0)}setPresetConfig(t,n){this.presetLabel=t,this.presetColors=n}setColorFromString(t,n=!0,i=!0){let o=K(t,!0),a=Tt(t,!0);!o&&!this.hsva&&!a&&!this.cmyk&&(o=K(this.fallbackColor,!0),a=Tt(this.fallbackColor,!0)),(o||a)&&(this.alphaChannel==y.disabled&&(o&&(o.a=1),a&&(a.a=1)),this.hsva=o,this.cmyk=a,this.sliderH=this.hsva?.h,this.updateColorPicker(n,i,a&&this.cmykEnabled))}stringToRgba(t){let n=K(t,!0);if(n)return j(n,I.rgba,y.enabled)}onDragEnd(t){this.callbacks&&this.callbacks.sliderDragEnd({slider:t,color:this.outputColor})}onDragStart(t){this.callbacks&&this.callbacks.sliderDragStart({slider:t,color:this.outputColor})}onFormatToggle(t){let n=this.dialogInputFields.length-(this.cmykEnabled?0:1),i=((this.dialogInputFields.indexOf(this.format)+t)%n+n)%n;this.format=this.dialogInputFields[i]}onColorChange(t){"rgX"in t&&"rgY"in t&&(this.hsva&&(this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"lightness",value:this.hsva?.v,color:this.outputColor}),this.callbacks&&this.callbacks.sliderChanged({slider:"saturation",value:this.hsva?.s,color:this.outputColor}))}onHueChange(t){"v"in t&&"rgX"in t&&(this.hsva&&(this.hsva.h=t.v/t.rgX),this.sliderH=this.hsva?.h,this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"hue",value:this.hsva?.h,color:this.outputColor}))}onValueChange(t){"v"in t&&"rgX"in t&&(this.hsva&&(this.hsva.v=t.v/t.rgX),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"value",value:this.hsva?.v,color:this.outputColor}))}onAlphaChange(t){"v"in t&&"rgX"in t&&(this.hsva&&(this.hsva.a=t.v/t.rgX),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"alpha",value:this.hsva?.a,color:this.outputColor}))}onHexInput(t){if(typeof t=="string"){t&&t[0]!="#"&&(t="#"+t);let i=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi.test(t);i&&(t.length==4&&(t="#"+t.substring(1).split("").map(o=>o+o).join("")),t.length==7&&this.alphaChannel==y.forced&&(t+=((this.hsva?.a||0)*255).toString(16)),this.setColorFromString(t,!0,!1)),this.callbacks&&this.callbacks.inputChanged({input:"hex",valid:i,value:t,color:this.outputColor})}else this.updateColorPicker()}onRedInput(t){if(typeof t!="string"){let n=this.hsva?D(this.hsva):new m(0,0,0,0,!0),i=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;i&&(n.r=t.v/t.rg,this.hsva=z(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"red",valid:i,value:n.r,color:this.outputColor})}}onBlueInput(t){if(typeof t!="string"){let n=this.hsva?D(this.hsva):new m(0,0,0,0,!0),i=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;i&&(n.b=t.v/t.rg,this.hsva=z(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"blue",valid:i,value:n.b,color:this.outputColor})}}onGreenInput(t){if(typeof t!="string"){let n=this.hsva?D(this.hsva):new m(0,0,0,0,!0),i=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;i&&(n.g=t.v/t.rg,this.hsva=z(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"green",valid:i,value:n.g,color:this.outputColor})}}onHueInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),n&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"hue",valid:n,value:this.hsva.h,color:this.outputColor})}}onValueInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),n&&(this.hsva.v=t.v/t.rg,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"value",valid:n,value:this.hsva.v,color:this.outputColor})}}onAlphaInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),n&&(this.hsva.a=t.v/t.rg,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"alpha",valid:n,value:this.hsva.a,color:this.outputColor})}}onLightnessInput(t){if(typeof t!="string"){let n=this.hsva?$(this.hsva):new T(0,0,0,0,!0),i=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;i&&(n.l=t.v/t.rg,this.hsva=Q(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"lightness",valid:i,value:n.l,color:this.outputColor})}}onSaturationInput(t){if(typeof t!="string"){let n=this.hsva?$(this.hsva):new T(0,0,0,0,!0),i=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;i&&(n.s=t.v/t.rg,this.hsva=Q(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"saturation",valid:i,value:n.s,color:this.outputColor})}}onCyanInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.cmyk=this.cmyk||new V(0,0,0,0,0,!0),n&&(this.cmyk.c=t.v/t.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}}onMagentaInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.cmyk=this.cmyk||new V(0,0,0,0,0,!0),n&&(this.cmyk.m=t.v/t.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}}onYellowInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.cmyk=this.cmyk||new V(0,0,0,0,0,!0),n&&(this.cmyk.y=t.v/t.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}}onBlackInput(t){if(typeof t!="string"){let n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;this.cmyk=this.cmyk||new V(0,0,0,0,0,!0),n&&(this.cmyk.k=t.v/t.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}}onAddPresetColor(t){this.presetColors?.filter(n=>n==t).length||(this.presetColors=this.presetColors?.concat(t),this.callbacks&&this.callbacks.presetColorsChanged(this.presetColors))}onRemovePresetColor(t){this.presetColors=this.presetColors?.filter(n=>n!=t),this.callbacks&&this.callbacks.presetColorsChanged(this.presetColors)}openColorPicker(){this.show||(this.show=!0,this.callbacks&&this.callbacks.stateChanged(!0))}closeColorPicker(){this.show&&(this.show=!1,this.callbacks&&this.callbacks.stateChanged(!1),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(t=!0,n=!0,i=!1){this.hsva=this.hsva||new M(0,0,0,0,!0),this.cmyk=this.cmyk||new V(0,0,0,0,0,!0),this.mode==H.grayscale&&(this.hsva.s=0);let o=this.outputColor,a=$(this.hsva);this.cmykEnabled&&(i?this.hsva=z(At(this.cmyk)):this.cmyk=W(D(this.hsva)),this.sliderH=this.hsva.h);let p=new M(this.sliderH||this.hsva.h,1,1,1,!0),f=D(this.hsva);if(n){this.hslaText=Bt(a),this.rgbaText=q(f),this.cmykEnabled&&(this.cmykText=Nt(this.cmyk));let X=this.alphaChannel===y.always;this.hexText=Ft(f,X),this.hexAlpha=this.rgbaText.a}this.outputFormat==I.auto&&this.hsva.a<1&&!jt.has(this.format)&&(this.format=this.hsva.a<1?P.rgba:P.hex);let R=new M(this.hsva.h,this.hsva.s,this.hsva.v,0,this.hsva.normalized),F=new M(this.hsva.h,this.hsva.s,this.hsva.v,1,this.hsva.normalized);this.hueSliderColor=j(p,"auto","disabled"),this.alphaSliderColor="linear-gradient(to right, "+j(R,"auto","forced")+" 0%, "+j(F,"auto","disabled")+" 100%)",this.svSliderLight=U(f),this.hueSliderLight=U(D(p)),this.valueSliderLight=U(f),this.alphaSliderLight=Yt(f),this.outputColor=j(this.hsva,this.outputFormat,this.alphaChannel),this.selectedColor=j(this.hsva,I.rgba),this.format!==P.cmyk?this.cmykColor="":this.cmykColor=Gt(this.cmyk,this.alphaChannel),this.slider=new tt(this.sliderH||this.hsva.h,this.hsva.s,1-this.hsva.v,this.hsva.a),t&&o!=this.outputColor&&this.callbacks&&(this.cmykEnabled&&this.callbacks.cmykChanged(this.cmykColor),this.callbacks.colorChanged(this.outputColor))}fill(t){return new Array(t).fill(1)}formatAlpha(t){return t?.toFixed(2).replace(/\.?0+$/,"")}static{this.\u0275fac=function(n){return new(n||e)(A(G),A(It),A(Ut))}}static{this.\u0275cmp=xt({type:e,selectors:[["nxt-color-picker"]],hostBindings:function(n,i){n&1&&h("keyup.esc",function(a){return i.onCancel(a)},B)("keyup.enter",function(a){return i.onAccept(a)},B)("click",function(a){return i.onClick(a)})("mousedown",function(a){return i.onFocusChange(a)},B)("focusin",function(a){return i.onFocusChange(a)},B)},decls:1,vars:1,consts:()=>{let t;t=$localize`:@@nxt-color-picker.button.add-color:Add color to preset`;let n;n=$localize`:@@nxt-color-picker.preset-colors:Preset colors`;let i;i=$localize`:@@nxt-color-picker.button.remove-color:Remove Color`;let o;o=$localize`:@@nxt-color-picker.button.cancel:Cancel`;let a;return a=$localize`:@@nxt-color-picker.button.ok:OK`,[n,o,a,[1,"color-picker",3,"ngStyle"],[1,"color-picker__arrow"],["nxtSlider","",1,"color-picker__sv",3,"rgX","rgY","ngStyle"],[1,"color-picker__controls"],[1,"color-picker__selected"],[1,"color-picker__selected-color"],[3,"ngStyle"],["type","button","title",t,1,"color-picker__add-selected",3,"ngClass"],[1,"color-picker__hav"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--hue",3,"rgX"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--value",3,"rgX"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--alpha",3,"rgX"],[1,"color-picker__inputs"],[1,"color-picker__buttons"],["nxtSlider","",1,"color-picker__sv",3,"newValue","dragStart","dragEnd","rgX","rgY","ngStyle"],[1,"color-picker__cursor","color-picker__cursor--sv",3,"ngClass","ngStyle"],["type","button","title",t,1,"color-picker__add-selected",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],["d","M0 0h24v24H0z","fill","none"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--hue",3,"newValue","dragStart","dragEnd","rgX"],[1,"color-picker__cursor",3,"ngClass","ngStyle"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--value",3,"newValue","dragStart","dragEnd","rgX"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--alpha",3,"newValue","dragStart","dragEnd","rgX"],[1,"color-picker__slider--alpha-bg",3,"ngStyle"],[1,"color-picker__input-fields"],[1,"color-picker__input-type"],[1,"color-picker__input-field"],["type","number","pattern","[0-9]*","min","0","max","100","nxtText","",3,"keyup.enter","newValue","rg","value"],[1,"color-picker__input-field-label"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.01","nxtText","",3,"keyup.enter","newValue","rg","value"],["type","number","pattern","[0-9]*","min","0","max","360","nxtText","",3,"keyup.enter","newValue","rg","value"],["type","number","pattern","[0-9]*","min","0","max","255","nxtText","",3,"keyup.enter","newValue","rg","value"],["nxtText","",3,"blur","keyup.enter","newValue","value"],["tabindex","0",1,"color-picker__input-type-arrow",3,"click","keydown.enter"],[1,"color-picker__separator"],[1,"color-picker__preset"],[1,"color-picker__preset-label"],[1,"color-picker__preset-items"],[1,"color-picker__preset-item"],["tabindex","0",1,"color-picker__preset-item",3,"title"],["tabindex","0",1,"color-picker__preset-item",3,"click","keydown.enter","title"],[1,"color-picker__preset-item-fill",3,"ngStyle"],["type","button","title",i,"tabindex","0",1,"color-picker__remove-selected"],["type","button","title",i,"tabindex","0",1,"color-picker__remove-selected",3,"click","keydown.enter"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],["type","button"],["type","button",3,"click"]]},template:function(n,i){n&1&&k(0,Ee,15,17,"div",3),n&2&&x(i.show?0:-1)},dependencies:[Ot,Wt,Vt,Kt],styles:[".color-picker[_ngcontent-%COMP%]{position:relative;-webkit-user-select:none;user-select:none;background-color:#fff;box-shadow:0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f,0 5px 5px -3px #0003;display:flex;flex-direction:column}.color-picker[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;font-size:12px}.color-picker[_ngcontent-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{height:0;width:0;border-style:solid;position:absolute;z-index:999999}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor[_ngcontent-%COMP%]{cursor:pointer;position:absolute;border-radius:50%;width:16px;height:16px;border:#222222 solid 2px;margin:0 -8px;transition:border .2s linear}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor.color-picker__cursor--sv[_ngcontent-%COMP%]{margin:-8px}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor.color-picker__cursor--light[_ngcontent-%COMP%]{border-color:#dadada}.color-picker[_ngcontent-%COMP%]   .color-picker__sv[_ngcontent-%COMP%]{position:relative;direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-image:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0);background-size:100% 100%}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:center}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]   .color-picker__selected[_ngcontent-%COMP%]{margin:4px;flex:48px 0 0}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]   .color-picker__hav[_ngcontent-%COMP%]{margin:-4px -4px -4px 0;flex:auto 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__selected-color[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:stretch;justify-content:stretch;border-radius:50%;background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat;box-shadow:0 0 8px -2px #00000080}.color-picker[_ngcontent-%COMP%]   .color-picker__selected-color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected[_ngcontent-%COMP%]{background:none;border:none;padding:0;width:100%;margin:0;color:#222;transition:color .2s linear;display:flex;align-items:center;justify-content:center;height:100%}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentcolor;width:24px;height:auto}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected.color-picker__add-selected--light[_ngcontent-%COMP%]{color:#dadada}.color-picker[_ngcontent-%COMP%]   .color-picker__hav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-picker[_ngcontent-%COMP%]   .color-picker__slider[_ngcontent-%COMP%]{width:100%;flex:100% 1 1;height:16px;margin:8px;position:relative}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--hue[_ngcontent-%COMP%]{background-size:100% 100%;background-image:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--value[_ngcontent-%COMP%]{background-size:100% 100%;background-image:linear-gradient(to right,#000,#fff)}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--alpha[_ngcontent-%COMP%]{background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--alpha[_ngcontent-%COMP%]   .color-picker__slider--alpha-bg[_ngcontent-%COMP%]{position:absolute;inset:0}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:flex-start}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]{flex:auto 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]{flex:24px 0 0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]{display:flex}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]{margin:4px;display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center;flex:20% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;font-size:12px;height:24px;appearance:none;flex:100% 1 1;padding:1px;border:#999 solid 1px;width:100%;background:none;min-width:0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{box-shadow:none}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{appearance:none;margin:0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   .color-picker__input-field-label[_ngcontent-%COMP%]{flex:100% 1 1;display:block;text-align:center;margin-top:4px}.color-picker[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]{width:24px;height:24px;margin-top:4px;display:flex;flex-wrap:wrap;background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUwIDE2IDMwIDQ0IDcwIDQ0ICIvPjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iNTAgODQgNzAgNTYgMzAgNTYgIi8+PC9zdmc+);background-repeat:no-repeat;background-position:center}.color-picker[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]   .color-picker__input-type-arrow[_ngcontent-%COMP%]{display:block;cursor:pointer;flex:100% 1 1;width:100%;height:50%}.color-picker[_ngcontent-%COMP%]   .color-picker__separator[_ngcontent-%COMP%]{border-top:1px solid #999;margin-left:8px;margin-right:8px;flex:100% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__preset[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:center;flex-wrap:wrap}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-label[_ngcontent-%COMP%]{margin:4px;flex:100% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]{display:flex;flex:100% 1 1;flex-wrap:wrap;align-items:flex-start}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]{position:relative;flex:20px 1 1;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-size:100% 100%;margin:4px;border-radius:4px;border:1px solid #999;cursor:pointer}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]   .color-picker__preset-item-fill[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:100%;border-radius:3px}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]:empty{margin-top:0;margin-bottom:0;border-top:0;border-bottom:0}.color-picker[_ngcontent-%COMP%]   .color-picker__remove-selected[_ngcontent-%COMP%]{border:none;padding:0;margin:0;color:#222;transition:color .2s linear;align-items:center;justify-content:center;box-shadow:0 0 8px -2px #00000080;position:absolute;width:12px;height:12px;right:-6px;top:-6px;background:#fff;border-radius:50%;display:flex}.color-picker[_ngcontent-%COMP%]   .color-picker__remove-selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentcolor;width:100%;height:auto}.color-picker[_ngcontent-%COMP%]   .color-picker__buttons[_ngcontent-%COMP%]{display:flex;margin:0 8px 8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}.color-picker[_ngcontent-%COMP%]   .color-picker__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:auto 0 0;margin:4px;color:var(--nxt-color-picker-button-color, inherit);background:var(--nxt-color-picker-button-background, #dadada);padding:var(--nxt-color-picker-button-padding, 4px 8px);border:var(--nxt-color-picker-button-border, none);border-radius:var(--nxt-color-picker-button-border-radius, 4px);font-size:var(--nxt-color-picker-button-font-size, inherit);font-weight:var(--nxt-color-picker-button-font-weight, inherit)}.color-picker__arrow--top[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--top   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-bottom:16px}.color-picker__arrow--top[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--top   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:12px 6px;border-color:#999 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);left:12px;bottom:-24px}.color-picker__arrow--left[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--left   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-right:16px}.color-picker__arrow--left[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--left   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:6px 12px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #999;top:12px;left:230px}.color-picker__arrow--right[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--right   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-left:16px}.color-picker__arrow--right[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--right   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:6px 12px;border-color:rgba(0,0,0,0) #999 rgba(0,0,0,0) rgba(0,0,0,0);top:12px;left:-24px}.color-picker__arrow--bottom[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--bottom   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-top:16px}.color-picker__arrow--bottom[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--bottom   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:12px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #999 rgba(0,0,0,0);top:-24px;left:12px}"]})}}return e})(),Ke=(()=>{class e{get resIgnoredElements(){return(Array.isArray(this.ignoredElements)?this.ignoredElements:[this.ignoredElements]).filter(n=>!!n)}constructor(t,n,i,o,a){this.injector=t,this.appRef=n,this.vcRef=i,this.elRef=o,this.overlay=a,this.dialogCreated=!1,this.ignoreChanges=!1,this._callbacks={stateChanged:p=>{this.toggleChange.emit(p),p?this.open.emit(this.nxtColor):this.close.emit(this.nxtColor)},cmykChanged:(p,f=!0)=>{this.ignoreChanges=f,this.cmykColorChange.emit(p)},colorChanged:(p,f=!0)=>{this.ignoreChanges=f,this.nxtColorChange.emit(p)},colorSelectCanceled:()=>{this.colorSelectCancel.emit()},colorSelected:p=>{this.colorSelect.emit(p)},inputChanged:p=>{this.inputChange.emit(p)},sliderDragStart:p=>{this.sliderDragStart.emit(p)},sliderChanged:p=>{this.sliderChange.emit(p)},sliderDragEnd:p=>{this.sliderDragEnd.emit(p)},presetColorsChanged:p=>{this.presetColorsChange.emit(p)}},this.width="230px",this.height="auto",this.toggle=!1,this.disabled=!1,this.mode="color",this.cmykEnabled=!1,this.outputFormat=I.auto,this.alphaChannel=y.enabled,this.position=E.auto,this.positionOffset=0,this.presetLabel=!0,this.disableInput=!1,this.dialogDisplay=S.popup,this.saveClickOutside=!0,this.closeClickOutside=!0,this.okButton=!1,this.cancelButton=!1,this.presetColorsEditable=!1,this.useRootViewContainer=!1,this.open=new b(!0),this.close=new b(!0),this.inputChange=new b(!0),this.toggleChange=new b(!0),this.sliderDragStart=new b(!0),this.sliderChange=new b(!0),this.sliderDragEnd=new b(!0),this.colorSelect=new b(!0),this.colorSelectCancel=new b(!0),this.nxtColorChange=new b(!1),this.cmykColorChange=new b(!0),this.presetColorsChange=new b(!0)}handleOpen(t){let n=new Set(Lt(t)),i=this.resIgnoredElements.find(o=>n.has(o));!this.disabled&&!i&&this.openDialog()}handleInput(t){let n=((t?.target?.value||"")+"").trim();this.dialog?this.dialog.setColorFromString(n,!0):(this.nxtColor=n,this.nxtColorChange.emit(this.nxtColor))}ngOnDestroy(){this.dispose()}ngOnChanges(t){t.toggle&&!this.disabled&&(t.toggle.currentValue?this.openDialog():this.closeDialog()),t.nxtColor&&(this.dialog&&!this.ignoreChanges&&(this.dialogDisplay==S.inline&&this.dialog.setInitialColor(t.nxtColor.currentValue),this.dialog.setColorFromString(t.nxtColor.currentValue,!1),this.useRootViewContainer&&this.dialogDisplay!=S.inline&&this.cmpRef?.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(t.presetLabel||t.presetColors)&&this.dialog&&this.dialog.setPresetConfig(this.presetLabel,this.presetColors),t.dialogDisplay&&(this.dispose(),this.create()),(t.position||t.positionOffset)&&this.dialogDisplay==S.popup&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this.overlay.position().flexibleConnectedTo(this.elRef).withPositions(this.getPositions(this.positionOffset)))}openDialog(){this.dialogCreated?this.dialog&&(this.overlayRef&&!this.overlayRef.hasAttached()&&(this.cmpRef=this.overlayRef.attach(new at(ct,null,this.injector)),this.dialog=this.cmpRef.instance,this.setupDialog()),this.dialog.openDialog(this.nxtColor)):this.create()}closeDialog(){this.dialog&&this.dialogDisplay==S.popup&&this.dialog.closeDialog()}textColorMode(t=new m(1,1,1,1,!0),n=this.dialog?.rgbaText){typeof t=="string"&&(t=D(K(t)??new M(1,1,1,1,!0)));let i=dt(n||t,new m(t.r,t.g,t.b,1,t.normalized));return U(i)?"light":"dark"}dispose(){this.cmpRef&&this.cmpRef.destroy(),this.overlayRef&&this.overlayRef.dispose(),this.cmpRef=void 0,this.overlayRef=void 0,this.dialogCreated=!1}create(){let t=this.vcRef;if(this.dialogCreated=!0,this.useRootViewContainer&&this.dialogDisplay!=S.inline){let n=this.appRef.componentTypes[0],i=this.injector.get(n);t=i.vcRef||i.viewContainerRef||this.vcRef,t==this.vcRef&&console.warn("You are using useRootViewContainer, but the root component is not exposing viewContainerRef! Please expose it by adding 'vcRef: ViewContainerRef' to the constructor.")}if(this.dialogDisplay!=S.inline){let n=this.overlay.position().flexibleConnectedTo(this.elRef).withFlexibleDimensions(!1).withPush(!1).withPositions(this.getPositions(this.positionOffset));this.overlayRef=this.overlay.create({positionStrategy:n,scrollStrategy:this.overlay.scrollStrategies.reposition({autoClose:!0})}),this.cmpRef=this.overlayRef.attach(new at(ct,null,this.injector))}else this.cmpRef=t.createComponent(ct,{injector:this.injector,index:0});this.dialog=this.cmpRef.instance,this.setupDialog(),this.vcRef!=t&&this.cmpRef.changeDetectorRef.detectChanges()}setupDialog(){this.dialog?.setupDialog(ut(ht({},this),{callbacks:this._callbacks,elementRef:this.elRef,color:this.nxtColor}))}getPositions(t=0){let n=[],i=Array.isArray(this.position)?this.position:[this.position||E.auto],o=this.elRef.nativeElement.getBoundingClientRect(),a={[E.right]:{originX:"end",originY:"top",overlayX:"start",overlayY:"top",panelClass:"color-picker__arrow--right",offsetX:o.width*t},[E.left]:{originX:"start",originY:"top",overlayX:"end",overlayY:"top",panelClass:"color-picker__arrow--left",offsetX:-o.width*t},[E.top]:{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"color-picker__arrow--top",offsetY:-o.height*t},[E.bottom]:{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",panelClass:"color-picker__arrow--bottom",offsetY:o.height*t}},p=new Set;return i.forEach(f=>{!p.has(f)&&f in a&&(p.add(f),n.push(a[f]))}),i.find(f=>f==E.auto)&&[E.right,E.top,E.bottom,E.left].forEach(f=>{!p.has(f)&&f in a&&(p.add(f),n.push(a[f]))}),n}static{this.\u0275fac=function(n){return new(n||e)(A(mt),A(wt),A(kt),A(G),A(St))}}static{this.\u0275dir=Z({type:e,selectors:[["","nxtColor",""]],hostBindings:function(n,i){n&1&&h("focus",function(a){return i.handleOpen(a)})("click",function(a){return i.handleOpen(a)})("input",function(a){return i.handleInput(a)})("change",function(a){return i.handleInput(a)})},inputs:{nxtColor:"nxtColor",width:"width",height:"height",toggle:"toggle",disabled:"disabled",mode:"mode",cmykEnabled:"cmykEnabled",outputFormat:"outputFormat",alphaChannel:"alphaChannel",fallbackColor:"fallbackColor",position:"position",positionOffset:"positionOffset",presetLabel:"presetLabel",presetColors:"presetColors",disableInput:"disableInput",dialogDisplay:"dialogDisplay",ignoredElements:"ignoredElements",saveClickOutside:"saveClickOutside",closeClickOutside:"closeClickOutside",okButton:"okButton",cancelButton:"cancelButton",presetColorsEditable:"presetColorsEditable",maxPresetColors:"maxPresetColors",useRootViewContainer:"useRootViewContainer"},outputs:{open:"open",close:"close",inputChange:"inputChange",toggleChange:"toggleChange",sliderDragStart:"sliderDragStart",sliderChange:"sliderChange",sliderDragEnd:"sliderDragEnd",colorSelect:"colorSelect",colorSelectCancel:"colorSelectCancel",nxtColorChange:"nxtColorChange",cmykColorChange:"cmykColorChange",presetColorsChange:"presetColorsChange"},exportAs:["nxtColorPicker"],features:[ft]})}}return e})();export{V as a,K as b,Tt as c,j as d,Gt as e,Ke as f};
