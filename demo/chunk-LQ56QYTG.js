import{f as le,m as Ae,n as Re}from"./chunk-VIJ7BBY6.js";import{Ab as A,Bb as R,Cb as H,Eb as k,Hb as K,Ib as C,Kb as s,Mc as Se,Oc as Ve,Pc as Oe,Qc as Te,Ra as B,Rb as re,Rc as Ee,Sa as u,Sc as De,Tc as Fe,Vb as w,Wb as Pe,Y as Ce,Ya as N,Yc as Ne,Z as me,_a as ke,db as xe,eb as we,ec as V,fb as W,fc as ye,ga as _,gc as Me,ha as p,ia as oe,ib as x,ka as fe,kb as b,kc as se,rb as be,sa as ve,uc as Ie,va as Y,xb as c,yb as d,zb as h}from"./chunk-QI4V3FBZ.js";import{a as ue,b as ge}from"./chunk-FBFWB55K.js";var Ke=(i,r,n)=>({visibility:i,width:r,height:n}),pe=i=>({backgroundColor:i}),ne=i=>({"color-picker__cursor--light":i}),$e=(i,r)=>({top:i,left:r}),Ue=i=>({"color-picker__add-selected--light":i}),de=i=>({left:i}),Qe=i=>({backgroundImage:i});function Je(i,r){i&1&&A(0,"div",21)}function qe(i,r){if(i&1){let n=k();d(0,"div",22),C("newValue",function(t){_(n);let o=s(2);return p(o.onColorChange(t))})("dragStart",function(){_(n);let t=s(2);return p(t.onDragStart("saturation-lightness"))})("dragEnd",function(){_(n);let t=s(2);return p(t.onDragEnd("saturation-lightness"))}),A(1,"div",23),h()}if(i&2){let n=s(2);c("rgX",1)("rgY",1)("ngStyle",V(5,pe,n.hueSliderColor||"")),u(),c("ngClass",V(7,ne,n.svSliderLight))("ngStyle",ye(9,$e,((n.slider==null?null:n.slider.v)||0)*100+"%",((n.slider==null?null:n.slider.s)||0)*100+"%"))}}function et(i,r){if(i&1){let n=k();d(0,"button",24),C("click",function(){_(n);let t=s(2);return p(t.onAddPresetColor(t.selectedColor))}),oe(),d(1,"svg",25),A(2,"path",26)(3,"path",27),h()()}if(i&2){let n=s(2);c("ngClass",V(1,Ue,n.alphaSliderLight))}}function tt(i,r){if(i&1){let n=k();d(0,"div",28),C("newValue",function(t){_(n);let o=s(2);return p(o.onHueChange(t))})("dragStart",function(){_(n);let t=s(2);return p(t.onDragStart("hue"))})("dragEnd",function(){_(n);let t=s(2);return p(t.onDragEnd("hue"))}),A(1,"div",29),h()}if(i&2){let n=s(2);c("rgX",1),u(),c("ngClass",V(3,ne,n.hueSliderLight))("ngStyle",V(5,de,((n.slider==null?null:n.slider.h)||0)*100+"%"))}}function it(i,r){if(i&1){let n=k();d(0,"div",30),C("newValue",function(t){_(n);let o=s(2);return p(o.onValueChange(t))})("dragStart",function(){_(n);let t=s(2);return p(t.onDragStart("value"))})("dragEnd",function(){_(n);let t=s(2);return p(t.onDragEnd("value"))}),A(1,"div",29),h()}if(i&2){let n=s(2);c("rgX",1),u(),c("ngClass",V(3,ne,n.valueSliderLight))("ngStyle",V(5,de,(1-((n.slider==null?null:n.slider.v)||0))*100+"%"))}}function nt(i,r){if(i&1){let n=k();d(0,"div",31),C("newValue",function(t){_(n);let o=s(2);return p(o.onAlphaChange(t))})("dragStart",function(){_(n);let t=s(2);return p(t.onDragStart("alpha"))})("dragEnd",function(){_(n);let t=s(2);return p(t.onDragEnd("alpha"))}),d(1,"div",32),A(2,"div",29),h()()}if(i&2){let n=s(2);c("rgX",1),u(),c("ngStyle",V(4,Qe,n.alphaSliderColor||"")),u(),c("ngClass",V(6,ne,n.alphaSliderLight))("ngStyle",V(8,de,((n.slider==null?null:n.slider.a)||0)*100+"%"))}}function ot(i,r){if(i&1){let n=k();d(0,"div",37)(1,"input",41),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onAlphaInput(t))}),h(),d(2,"span",39),w(3,"A"),h()()}if(i&2){let n=s(4);u(),c("rg",1)("value",n.formatAlpha(n.hslaText==null?null:n.hslaText.a))}}function rt(i,r){if(i&1){let n=k();R(0),d(1,"div",37)(2,"input",38),C("keyup.enter",function(t){_(n);let o=s(3);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(3);return p(o.onValueInput(t))}),h(),d(3,"span",39),w(4,"V"),h()(),x(5,ot,4,2,"div",40),H()}if(i&2){let n=s(3);u(2),c("rg",100)("value",n.hslaText==null||n.hslaText.l==null?null:n.hslaText.l.toFixed(0)),u(3),c("ngIf",n.alphaChannel!="disabled")}}function st(i,r){if(i&1){let n=k();d(0,"div",37)(1,"input",41),C("keyup.enter",function(t){_(n);let o=s(5);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(5);return p(o.onAlphaInput(t))}),h(),d(2,"span",39),w(3,"A"),h()()}if(i&2){let n=s(5);u(),c("rg",1)("value",n.formatAlpha(n.hslaText==null?null:n.hslaText.a))}}function lt(i,r){if(i&1){let n=k();R(0),d(1,"div",37)(2,"input",45),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onHueInput(t))}),h(),d(3,"span",39),w(4,"H"),h()(),d(5,"div",37)(6,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onSaturationInput(t))}),h(),d(7,"span",39),w(8,"S"),h()(),d(9,"div",37)(10,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onLightnessInput(t))}),h(),d(11,"span",39),w(12,"L"),h()(),x(13,st,4,2,"div",40),H()}if(i&2){let n=s(4);u(2),c("rg",360)("value",n.hslaText==null||n.hslaText.h==null?null:n.hslaText.h.toFixed(0)),u(4),c("rg",100)("value",n.hslaText==null||n.hslaText.s==null?null:n.hslaText.s.toFixed(0)),u(4),c("rg",100)("value",n.hslaText==null||n.hslaText.l==null?null:n.hslaText.l.toFixed(0)),u(3),c("ngIf",n.alphaChannel!="disabled")}}function at(i,r){if(i&1){let n=k();d(0,"div",37)(1,"input",41),C("keyup.enter",function(t){_(n);let o=s(5);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(5);return p(o.onAlphaInput(t))}),h(),d(2,"span",39),w(3,"A"),h()()}if(i&2){let n=s(5);u(),c("rg",1)("value",n.formatAlpha(n.hslaText==null?null:n.hslaText.a))}}function ct(i,r){if(i&1){let n=k();R(0),d(1,"div",37)(2,"input",46),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onRedInput(t))}),h(),d(3,"span",39),w(4,"R"),h()(),d(5,"div",37)(6,"input",46),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onGreenInput(t))}),h(),d(7,"span",39),w(8,"G"),h()(),d(9,"div",37)(10,"input",46),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onBlueInput(t))}),h(),d(11,"span",39),w(12,"B"),h()(),x(13,at,4,2,"div",40),H()}if(i&2){let n=s(4);u(2),c("rg",255)("value",n.rgbaText==null||n.rgbaText.r==null?null:n.rgbaText.r.toFixed(0)),u(4),c("rg",255)("value",n.rgbaText==null||n.rgbaText.g==null?null:n.rgbaText.g.toFixed(0)),u(4),c("rg",255)("value",n.rgbaText==null||n.rgbaText.b==null?null:n.rgbaText.b.toFixed(0)),u(3),c("ngIf",n.alphaChannel!="disabled")}}function _t(i,r){if(i&1){let n=k();d(0,"div",37)(1,"input",41),C("keyup.enter",function(t){_(n);let o=s(5);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(5);return p(o.onAlphaInput(t))}),h(),d(2,"span",39),w(3,"A"),h()()}if(i&2){let n=s(5);u(),c("rg",1)("value",n.formatAlpha(n.cmykText==null?null:n.cmykText.a))}}function pt(i,r){if(i&1){let n=k();R(0),d(1,"div",37)(2,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onCyanInput(t))}),h(),d(3,"span",39),w(4,"C"),h()(),d(5,"div",37)(6,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onMagentaInput(t))}),h(),d(7,"span",39),w(8,"M"),h()(),d(9,"div",37)(10,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onYellowInput(t))}),h(),d(11,"span",39),w(12,"Y"),h()(),d(13,"div",37)(14,"input",38),C("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onBlackInput(t))}),h(),d(15,"span",39),w(16,"K"),h()(),x(17,_t,4,2,"div",40),H()}if(i&2){let n=s(4);u(2),c("rg",100)("value",n.cmykText==null||n.cmykText.c==null?null:n.cmykText.c.toFixed(0)),u(4),c("rg",100)("value",n.cmykText==null||n.cmykText.m==null?null:n.cmykText.m.toFixed(0)),u(4),c("rg",100)("value",n.cmykText==null||n.cmykText.y==null?null:n.cmykText.y.toFixed(0)),u(4),c("rg",100)("value",n.cmykText==null||n.cmykText.k==null?null:n.cmykText.k.toFixed(0)),u(3),c("ngIf",n.alphaChannel!="disabled")}}function dt(i,r){if(i&1){let n=k();d(0,"div",37)(1,"input",41),C("keyup.enter",function(t){_(n);let o=s(5);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(5);return p(o.onAlphaInput(t))}),h(),d(2,"span",39),w(3,"A"),h()()}if(i&2){let n=s(5);u(),c("rg",1)("value",n.formatAlpha(n.hexAlpha))}}function ht(i,r){if(i&1){let n=k();R(0),d(1,"div",37)(2,"input",47),C("blur",function(){_(n);let t=s(4);return p(t.onHexInput())})("keyup.enter",function(t){_(n);let o=s(4);return p(o.onAccept(t))})("newValue",function(t){_(n);let o=s(4);return p(o.onHexInput(t))}),h(),d(3,"span",39),w(4,"Hex"),h()(),x(5,dt,4,2,"div",40),H()}if(i&2){let n=s(4);u(2),c("value",n.hexText),u(3),c("ngIf",n.alphaChannel=="forced")}}function ut(i,r){if(i&1&&(R(0,42),x(1,lt,14,7,"ng-container",43)(2,ct,14,7,"ng-container",43)(3,pt,18,9,"ng-container",43)(4,ht,6,2,"ng-container",44),H()),i&2){let n=s(3);c("ngSwitch",n.format),u(),c("ngSwitchCase","hsla"),u(),c("ngSwitchCase","rgba"),u(),c("ngSwitchCase","cmyk")}}function gt(i,r){if(i&1){let n=k();d(0,"div",48)(1,"span",49),C("click",function(){_(n);let t=s(3);return p(t.onFormatToggle(1))})("keydown.enter",function(){_(n);let t=s(3);return p(t.onFormatToggle(1))}),h(),d(2,"span",49),C("click",function(){_(n);let t=s(3);return p(t.onFormatToggle(-1))})("keydown.enter",function(){_(n);let t=s(3);return p(t.onFormatToggle(-1))}),h()()}}function Ct(i,r){if(i&1&&(d(0,"div",33)(1,"div",34),x(2,rt,6,3,"ng-container",35)(3,ut,5,4,"ng-template",null,0,se),h(),x(5,gt,3,0,"div",36),h()),i&2){let n=re(4),e=s(2);u(2),c("ngIf",e.mode==e.colorModeInternal.grayscale)("ngIfElse",n),u(3),c("ngIf",e.mode==e.colorModeInternal.color)}}function mt(i,r){i&1&&(R(0),K(1,2),H())}function ft(i,r){if(i&1&&w(0),i&2){let n=s(4);Pe(n.presetLabel)}}function vt(i,r){if(i&1&&(d(0,"div",54),x(1,mt,2,0,"ng-container",35)(2,ft,1,1,"ng-template",null,1,se),h()),i&2){let n=re(3),e=s(3);u(),c("ngIf",e.presetLabel===!0)("ngIfElse",n)}}function kt(i,r){if(i&1){let n=k();d(0,"button",62),C("click",function(){_(n);let t=s(2).$implicit,o=s(4);return p(o.onRemovePresetColor(t))})("keydown.enter",function(){_(n);let t=s(2).$implicit,o=s(4);return p(o.onRemovePresetColor(t))}),oe(),d(1,"svg",25),A(2,"path",63)(3,"path",27),h()()}}function xt(i,r){if(i&1){let n=k();d(0,"div",59),C("click",function(){_(n);let t=s().$implicit,o=s(4);return p(o.setColorFromString(t))})("keydown.enter",function(){_(n);let t=s().$implicit,o=s(4);return p(o.setColorFromString(t))}),d(1,"div",60),x(2,kt,4,0,"button",61),h()()}if(i&2){let n=r.ngIf,e=s().$implicit,t=s(4);c("title",e),u(),c("ngStyle",V(3,pe,n||"")),u(),c("ngIf",t.presetColorsEditable)}}function wt(i,r){if(i&1&&(R(0),x(1,xt,3,5,"div",58),H()),i&2){let n=r.$implicit,e=s(4);u(),c("ngIf",e.stringToRgba(n))}}function bt(i,r){i&1&&A(0,"div",64)}function Pt(i,r){if(i&1&&(d(0,"div",55),x(1,wt,2,1,"ng-container",56)(2,bt,1,0,"div",57),h()),i&2){let n=s(3);u(),c("ngForOf",n.presetColors),u(),c("ngForOf",n.fill(50))}}function yt(i,r){if(i&1&&(R(0),A(1,"div",50),d(2,"div",51),x(3,vt,4,2,"div",52)(4,Pt,3,2,"div",53),h(),H()),i&2){let n=s(2);u(3),c("ngIf",n.presetLabel),u(),c("ngIf",n.presetColors==null?null:n.presetColors.length)}}function Mt(i,r){if(i&1){let n=k();d(0,"button",67),C("click",function(t){_(n);let o=s(3);return p(o.onCancel(t))}),K(1,3),h()}}function It(i,r){if(i&1){let n=k();d(0,"button",67),C("click",function(t){_(n);let o=s(3);return p(o.onAccept(t))}),K(1,4),h()}}function St(i,r){if(i&1&&(d(0,"div",65),x(1,Mt,2,0,"button",66)(2,It,2,0,"button",66),h()),i&2){let n=s(2);u(),c("ngIf",n.cancelButton),u(),c("ngIf",n.okButton)}}function Vt(i,r){if(i&1){let n=k();d(0,"div",6),C("click",function(t){return _(n),p(t.stopPropagation())}),x(1,Je,1,0,"div",7)(2,qe,2,12,"div",8),d(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12),x(7,et,4,3,"button",13),h()()(),d(8,"div",14),x(9,tt,2,7,"div",15)(10,it,2,7,"div",16)(11,nt,3,10,"div",17),h()(),x(12,Ct,6,3,"div",18)(13,yt,5,2,"ng-container",19)(14,St,3,2,"div",20),h()}if(i&2){let n=s();c("ngStyle",Me(11,Ke,n.show?"visible":"hidden",n.width||"",n.height||"")),u(),c("ngIf",n.dialogDisplay=="popup"),u(),c("ngIf",n.mode==n.colorModeInternal.color),u(4),c("ngStyle",V(15,pe,n.selectedColor||"")),u(),c("ngIf",n.presetColorsEditable&&!(n.maxPresetColors&&((n.presetColors==null?null:n.presetColors.length)||0)>=n.maxPresetColors)),u(2),c("ngIf",n.mode==n.colorModeInternal.color),u(),c("ngIf",n.mode==n.colorModeInternal.grayscale),u(),c("ngIf",n.alphaChannel!="disabled"),u(),c("ngIf",!n.disableInput&&(n.mode==n.colorModeInternal.color||n.mode==n.colorModeInternal.grayscale)),u(),c("ngIf",n.presetColors==null?null:n.presetColors.length),u(),c("ngIf",n.okButton||n.cancelButton)}}var S=class{constructor(r,n,e,t,o,a=!0){this.c=r,this.m=n,this.y=e,this.k=t,this.a=o,this.normalized=a}},T=class{constructor(r,n,e,t,o=!0){this.h=r,this.s=n,this.l=e,this.a=t,this.normalized=o}},M=class{constructor(r,n,e,t,o=!0){this.h=r,this.s=n,this.v=e,this.a=t,this.normalized=o}},v=class{constructor(r,n,e,t,o=!0){this.r=r,this.g=n,this.b=e,this.a=t,this.normalized=o}},P=function(i){return i.hex="hex",i.rgba="rgba",i.hsla="hsla",i.cmyk="cmyk",i}(P||{}),Ot=new Set([P.hsla,P.rgba,P.cmyk]),I=function(i){return i.auto="auto",i.hex="hex",i.rgba="rgba",i.hsla="hsla",i}(I||{}),y=function(i){return i.enabled="enabled",i.disabled="disabled",i.always="always",i.forced="forced",i}(y||{}),E=function(i){return i.auto="auto",i.top="top",i.left="left",i.right="right",i.bottom="bottom",i}(E||{}),O=function(i){return i.popup="popup",i.inline="inline",i}(O||{});function m(i,r,n){return Math.min(n,Math.max(i,r))}function $(i){i=Ge(i);let r=i.h,n=i.s,e=i.v,t=i.a;if(e==0)return new T(r,0,0,t,!0);if(n==0&&e==1)return new T(r,1,1,t,!0);{let o=e*(2-n)/2;return new T(r,e*n/(1-Math.abs(2*o-1)),o,t,!0)}}function q(i){i=Et(i);let r=Math.min(i.h,1),n=Math.min(i.s,1),e=Math.min(i.l,1),t=Math.min(i.a,1);if(e==0)return new M(r,0,0,t,!0);{let o=e+n*(1-Math.abs(2*e-1))/2;return new M(r,2*(o-e)/o,o,t,!0)}}function D(i){i=Ge(i);let r,n,e,t=i.h,o=i.s,a=i.v,l=i.a,g=Math.floor(t*6),f=t*6-g,F=a*(1-o),G=a*(1-f*o),Z=a*(1-(1-f)*o);switch(g%6){case 0:r=a,n=Z,e=F;break;case 1:r=G,n=a,e=F;break;case 2:r=F,n=a,e=Z;break;case 3:r=F,n=G,e=a;break;case 4:r=Z,n=F,e=a;break;case 5:r=a,n=F,e=G;break;default:r=0,n=0,e=0}return new v(r,n,e,l,!0)}function U(i){i=j(i);let r=1-Math.max(i.r,i.g,i.b);if(r==1)return new S(0,0,0,1,i.a,!0);{let n=(1-i.r-r)/(1-r),e=(1-i.g-r)/(1-r),t=(1-i.b-r)/(1-r);return new S(n,e,t,r,i.a,!0)}}function X(i){i=j(i);let r,n=Math.min(i.r,1),e=Math.min(i.g,1),t=Math.min(i.b,1),o=Math.min(i.a,1),a=Math.max(n,e,t),l=Math.min(n,e,t),g=a,f=a-l,F=a==0?0:f/a;if(a==l)r=0;else{switch(a){case n:r=(e-t)/f+(e<t?6:0);break;case e:r=(t-n)/f+2;break;case t:r=(n-e)/f+4;break;default:r=0}r/=6}return new M(r,F,g,o,!0)}function je(i,r){i=ee(i);let n="#"+(1<<24|Math.round(i.r)<<16|Math.round(i.g)<<8|Math.round(i.b)).toString(16).substring(1);return r&&(n+=(256|m(Math.round(i.a*255),0,255)).toString(16).substring(1)),n}function ze(i){i=Tt(i);let r=(1-i.c)*(1-i.k),n=(1-i.m)*(1-i.k),e=(1-i.y)*(1-i.k);return new v(r,n,e,i.a,!0)}function Tt(i){return i.normalized?i:new S(m(i.c/100,0,1),m(i.m/100,0,1),m(i.y/100,0,1),m(i.k/100,0,1),m(i.a,0,1),!0)}function Xe(i){return i.normalized?new S(m(i.c*100,0,100),m(i.m*100,0,100),m(i.y*100,0,100),m(i.k*100,0,100),m(i.a,0,1),!1):i}function j(i){return i.normalized?i:new v(m(i.r/255,0,1),m(i.g/255,0,1),m(i.b/255,0,1),m(i.a,0,1),!0)}function ee(i){return i.normalized?new v(m(i.r*255,0,255),m(i.g*255,0,255),m(i.b*255,0,255),m(i.a,0,1),!1):i}function Ge(i){return i.normalized?i:new M(m(i.h/360,0,1),m(i.s/100,0,1),m(i.v/100,0,1),m(i.a,0,1),!0)}function Et(i){return i.normalized?i:new T(m(i.h/360,0,1),m(i.s/100,0,1),m(i.l/100,0,1),m(i.a,0,1),!0)}function Ze(i){return i.normalized?new T(m(i.h*360,0,360),m(i.s*100,0,100),m(i.l*100,0,100),m(i.a,0,1),!1):i}function Q(i="",r=!1){let n;i=(i||"").toLowerCase();let e=[{re:/(cmyk)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new S(parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])/100,parseFloat(t[5])/100,isNaN(parseFloat(t[6]))?1:parseFloat(t[6]),!0)},{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new v(parseFloat(t[2])/255,parseFloat(t[3])/255,parseFloat(t[4])/255,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]),!0)},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new T(parseFloat(t[2])/360,parseFloat(t[3])/100,parseFloat(t[4])/100,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]),!0)}];r?e.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:t=>new v(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,parseInt(t[4]||"FF",16)/255,!0)}):e.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:t=>new v(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1,!0)}),e.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:t=>new v(parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255,parseInt(t[3]+t[3],16)/255,1,!0)});for(let t in e)if(e.hasOwnProperty(t)){let o=e[t],a=o.re.exec(i),l=a&&o.parse(a);if(l)return l instanceof v?n=X(l):l instanceof T?n=q(l):l instanceof S?n=X(ze(l)):n=l,n}return n}function He(i="",r=!1){let n;i=(i||"").toLowerCase();let e=[{re:/(cmyk)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new S(parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])/100,parseFloat(t[5])/100,isNaN(parseFloat(t[6]))?1:parseFloat(t[6]),!0)},{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new v(parseFloat(t[2])/255,parseFloat(t[3])/255,parseFloat(t[4])/255,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]),!0)},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:t=>new T(parseFloat(t[2])/360,parseFloat(t[3])/100,parseFloat(t[4])/100,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]),!0)}];r?e.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:t=>new v(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,parseInt(t[4]||"FF",16)/255,!0)}):e.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:t=>new v(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1,!0)}),e.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:t=>new v(parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255,parseInt(t[3]+t[3],16)/255,1,!0)});for(let t in e)if(e.hasOwnProperty(t)){let o=e[t],a=o.re.exec(i),l=a&&o.parse(a);if(l)return l instanceof v?n=U(l):l instanceof M?n=U(D(l)):l instanceof T?n=U(D(q(l))):n=l,n}return n}function z(i,r,n){switch(r==I.auto&&(r=i.a<1?I.rgba:I.hex),r){case I.hsla:let e=Ze($(i));return i.a<1||n==y.always?"hsla("+e.h.toFixed(0)+","+e.s.toFixed(0)+"%,"+e.l.toFixed(0)+"%,"+e.a.toFixed(2)+")":"hsl("+e.h.toFixed(0)+","+e.s.toFixed(0)+"%,"+e.l.toFixed(0)+"%)";case I.rgba:let t=ee(D(i));return i.a<1||n==y.always?"rgba("+t.r.toFixed(0)+","+t.g.toFixed(0)+","+t.b.toFixed(0)+","+t.a.toFixed(2)+")":"rgb("+t.r.toFixed(0)+","+t.g.toFixed(0)+","+t.b.toFixed(0)+")";default:let o=n==y.always||n==y.forced;return je(ee(D(i)),o)}}function Dt(i,r){return i=Xe(i),i.a<1||r==y.always?"cmyka("+i.c.toFixed(0)+","+i.m.toFixed(0)+","+i.y.toFixed(0)+","+i.k.toFixed(0)+","+i.a.toFixed(2)+")":"cmyk("+i.c.toFixed(0)+","+i.m.toFixed(0)+","+i.y.toFixed(0)+","+i.k.toFixed(0)+")"}function te(i,r){i=j(i),r=j(r),Math.round(i.a*100)<100&&(i=he(i,r));let n=Be(i)+.05,e=Be(r)+.05;return Math.max(n,e)/Math.min(n,e)}function he(i,r){i=j(i),r=j(r);let n=Ft(i.a,r.a),e=ae(i.r,i.a,r.r,r.a,n),t=ae(i.g,i.a,r.g,r.a,n),o=ae(i.b,i.a,r.b,r.a,n);return new v(e,t,o,n,!0)}function Ft(i,r){return 1-(1-r)*(1-i)}function ae(i,r,n,e,t){return t==0?0:(i*r+n*e*(1-r))/t}function Be(i){i=j(i);let r=i.r;r=r<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);let n=i.g;n=n<.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);let e=i.b;return e=e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),.2126*r+.7152*n+.0722*e}var _e=new v(218,218,218,1,!1),Ye=new v(34,34,34,1,!1);function J(i){let r=te(_e,new v(i.r,i.g,i.b,1,i.normalized)),n=te(Ye,new v(i.r,i.g,i.b,1,i.normalized));return r>n}function Nt(i){let r=he(i,_e),n=te(_e,new v(r.r,r.g,r.b,1,r.normalized)),e=te(Ye,new v(r.r,r.g,r.b,1,r.normalized));return n>e}var ie=class{constructor(r,n,e,t){this.h=r,this.s=n,this.v=e,this.a=t}};var L=function(i){return i[i.color=0]="color",i[i.grayscale=1]="grayscale",i[i.presets=2]="presets",i}(L||{});function At(i){switch(i.toString().toUpperCase()){case"1":case"C":case"COLOR":return L.color;case"2":case"G":case"GRAYSCALE":return L.grayscale;case"3":case"P":case"PRESETS":return L.presets;default:return L.color}}function Le(i){let r=((i||"auto")+"").trim().toLowerCase();if(r.match(/^\d+[a-z%]+$/)||r=="auto")return r;let n=parseInt(r,10);return Number.isNaN(n)?"auto":`${n}px`}function We(i){if(i.composedPath)return i.composedPath();let r=i;if(r.path)return r.path;let n=r.target;for(r.path=[];n.parentNode!==null;)r.path.push(n),n=n.parentNode;return r.path.push(document,window),r.path}var Rt=(()=>{let r=class r{constructor(){}setActive(e){e&&e.dialogDisplay==O.popup&&(this.active&&this.active!=e&&this.active.closeDialog(),this.active=e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=Ce({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),Ht=(()=>{let r=class r{constructor(){this.newValue=new b}inputChange(e){let t=((e?.target?.value||"")+"").trim();if(this.rg==null)this.newValue.emit(t);else{let o=parseFloat(t);this.newValue.emit({v:o,rg:this.rg})}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=W({type:r,selectors:[["","nxtText",""]],hostBindings:function(t,o){t&1&&C("input",function(l){return o.inputChange(l)})("change",function(l){return o.inputChange(l)})},inputs:{rg:"rg",text:[0,"nxtText","text"]},outputs:{newValue:"newValue"},standalone:!1});let i=r;return i})(),Bt=(()=>{let r=class r{constructor(e){this.elRef=e,this.isMoving=!1,this.dragEnd=new b,this.dragStart=new b,this.newValue=new b}onStart(e){e.stopPropagation(),e.preventDefault(),this.setCursor(e),this.isMoving=!0,this.dragStart.emit()}onMove(e){this.isMoving&&(e.stopPropagation(),e.preventDefault(),this.setCursor(e))}onStop(e){this.isMoving&&(e.stopPropagation(),e.preventDefault(),this.isMoving=!1,this.dragEnd.emit())}getX(e){let t=this.elRef.nativeElement.getBoundingClientRect();return("pageX"in e?e.pageX:e.touches[0].pageX)-t.left-window.scrollX}getY(e){let t=this.elRef.nativeElement.getBoundingClientRect();return("pageX"in e?e.pageY:e.touches[0].pageY)-t.top-window.scrollY}setCursor(e){let t=this.elRef.nativeElement.offsetWidth,o=this.elRef.nativeElement.offsetHeight,a=Math.max(0,Math.min(this.getX(e),t)),l=Math.max(0,Math.min(this.getY(e),o));this.rgX!=null&&this.rgY!=null?this.newValue.emit({s:a/t,v:1-l/o,rgX:this.rgX,rgY:this.rgY}):this.rgX==null&&this.rgY!=null?this.newValue.emit({v:l/o,rgY:this.rgY}):this.rgX!=null&&this.rgY==null&&this.newValue.emit({v:a/t,rgX:this.rgX})}};r.\u0275fac=function(t){return new(t||r)(N(Y))},r.\u0275dir=W({type:r,selectors:[["","nxtSlider",""]],hostBindings:function(t,o){t&1&&C("mousedown",function(l){return o.onStart(l)})("touchstart",function(l){return o.onStart(l)})("mousemove",function(l){return o.onMove(l)},B)("touchmove",function(l){return o.onMove(l)},B)("mouseup",function(l){return o.onStop(l)},B)("touchend",function(l){return o.onStop(l)},B)},inputs:{rgX:"rgX",rgY:"rgY",slider:[0,"nxtSlider","slider"]},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"},standalone:!1});let i=r;return i})(),ce=(()=>{let r=class r{constructor(e,t,o){this.elRef=e,this.cdRef=t,this.service=o,this.colorModeInternal=L,this.cmykColor="",this.outputColor="",this.initialColor="",this.dialogInputFields=[P.hex,P.rgba,P.hsla,P.cmyk],this.show=!1,this.format=P.hex,this.selectedColor="",this.svSliderLight=!1,this.hueSliderLight=!1,this.valueSliderLight=!1,this.alphaSliderLight=!1,this.mode=L.color,this.cmykEnabled=!1,this.alphaChannel=y.enabled,this.outputFormat=I.auto,this.disableInput=!1,this.saveClickOutside=!1,this.closeClickOutside=!1,this.okButton=!1,this.cancelButton=!1,this.presetLabel=!1,this.presetColorsEditable=!1}onCancel(e){e.stopPropagation(),e.preventDefault(),this.initialColor&&this.setColorFromString(this.initialColor,!0),this.callbacks&&this.callbacks.colorSelectCanceled(),this.show&&this.dialogDisplay==O.popup&&this.closeColorPicker()}onAccept(e){e.stopPropagation(),e.preventDefault(),this.show&&this.dialogDisplay==O.popup&&(this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor),this.dialogDisplay==O.popup&&this.closeColorPicker())}onFocusChange(e){let t=new Set(We(e));this.ignoredElements?.find(a=>t.has(a))||(this.show&&this.dialogDisplay==O.popup?(this.saveClickOutside?this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor):(this.setColorFromString(this.initialColor,!1),this.callbacks&&(this.cmykEnabled&&this.callbacks.cmykChanged(this.cmykColor),this.callbacks.colorChanged(this.initialColor))),this.closeClickOutside&&this.closeColorPicker()):this.saveClickOutside&&this.outputColor&&this.callbacks&&this.callbacks.colorSelected(this.outputColor))}ngOnInit(){this.slider=new ie(0,0,0,0),this.cmykEnabled?this.format=P.cmyk:this.outputFormat==I.rgba?this.format=P.rgba:this.outputFormat==I.hsla?this.format=P.hsla:this.format=P.hex,this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewChecked(){}openDialog(e,t=!0){this.service.setActive(this),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e){this.setInitialColor(e.color),this.mode=At(e.mode),this.callbacks=e.callbacks,this.disableInput=e.disableInput,this.cmykEnabled=e.cmykEnabled,this.alphaChannel=e.alphaChannel,this.outputFormat=e.outputFormat,this.dialogDisplay=e.dialogDisplay,this.ignoredElements=[...e.ignoredElements??[],this.elRef&&this.elRef.nativeElement,e.elementRef&&e.elementRef.nativeElement].filter(t=>!!t),this.saveClickOutside=e.saveClickOutside,this.closeClickOutside=e.closeClickOutside,this.width=Le(e.width),this.height=Le(e.height),this.okButton=e.okButton,this.cancelButton=e.cancelButton,this.fallbackColor=e.fallbackColor||"#fff",this.setPresetConfig(e.presetLabel,e.presetColors),this.maxPresetColors=e.maxPresetColors,this.presetColorsEditable=e.presetColorsEditable,e.outputFormat==I.hex&&e.alphaChannel!=y.always&&e.alphaChannel!=y.forced&&(this.alphaChannel=y.disabled)}setInitialColor(e){this.initialColor=e,this.setColorFromString(this.initialColor,!1,!0)}setPresetConfig(e,t){this.presetLabel=e,this.presetColors=t}setColorFromString(e,t=!0,o=!0){let a=Q(e,!0),l=He(e,!0);!a&&!this.hsva&&!l&&!this.cmyk&&(a=Q(this.fallbackColor,!0),l=He(this.fallbackColor,!0)),(a||l)&&(this.alphaChannel==y.disabled&&(a&&(a.a=1),l&&(l.a=1)),this.hsva=a,this.cmyk=l,this.sliderH=this.hsva?.h,this.updateColorPicker(t,o,l&&this.cmykEnabled))}stringToRgba(e){let t=Q(e,!0);if(t)return z(t,I.rgba,y.enabled)}onDragEnd(e){this.callbacks&&this.callbacks.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.callbacks&&this.callbacks.sliderDragStart({slider:e,color:this.outputColor})}onFormatToggle(e){let t=this.dialogInputFields.length-(this.cmykEnabled?0:1),o=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[o]}onColorChange(e){"rgX"in e&&"rgY"in e&&(this.hsva&&(this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"lightness",value:this.hsva?.v,color:this.outputColor}),this.callbacks&&this.callbacks.sliderChanged({slider:"saturation",value:this.hsva?.s,color:this.outputColor}))}onHueChange(e){"v"in e&&"rgX"in e&&(this.hsva&&(this.hsva.h=e.v/e.rgX),this.sliderH=this.hsva?.h,this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"hue",value:this.hsva?.h,color:this.outputColor}))}onValueChange(e){"v"in e&&"rgX"in e&&(this.hsva&&(this.hsva.v=e.v/e.rgX),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"value",value:this.hsva?.v,color:this.outputColor}))}onAlphaChange(e){"v"in e&&"rgX"in e&&(this.hsva&&(this.hsva.a=e.v/e.rgX),this.updateColorPicker(),this.callbacks&&this.callbacks.sliderChanged({slider:"alpha",value:this.hsva?.a,color:this.outputColor}))}onHexInput(e){if(typeof e=="string"){e&&e[0]!="#"&&(e="#"+e);let o=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi.test(e);o&&(e.length==4&&(e="#"+e.substring(1).split("").map(a=>a+a).join("")),e.length==7&&this.alphaChannel==y.forced&&(e+=((this.hsva?.a||0)*255).toString(16)),this.setColorFromString(e,!0,!1)),this.callbacks&&this.callbacks.inputChanged({input:"hex",valid:o,value:e,color:this.outputColor})}else this.updateColorPicker()}onRedInput(e){if(typeof e!="string"){let t=this.hsva?D(this.hsva):new v(0,0,0,0,!0),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(t.r=e.v/e.rg,this.hsva=X(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"red",valid:o,value:t.r,color:this.outputColor})}}onBlueInput(e){if(typeof e!="string"){let t=this.hsva?D(this.hsva):new v(0,0,0,0,!0),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(t.b=e.v/e.rg,this.hsva=X(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"blue",valid:o,value:t.b,color:this.outputColor})}}onGreenInput(e){if(typeof e!="string"){let t=this.hsva?D(this.hsva):new v(0,0,0,0,!0),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(t.g=e.v/e.rg,this.hsva=X(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"green",valid:o,value:t.g,color:this.outputColor})}}onHueInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}}onValueInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}}onAlphaInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.hsva=this.hsva||new M(0,0,0,0,!0),t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}}onLightnessInput(e){if(typeof e!="string"){let t=this.hsva?$(this.hsva):new T(0,0,0,0,!0),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(t.l=e.v/e.rg,this.hsva=q(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"lightness",valid:o,value:t.l,color:this.outputColor})}}onSaturationInput(e){if(typeof e!="string"){let t=this.hsva?$(this.hsva):new T(0,0,0,0,!0),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(t.s=e.v/e.rg,this.hsva=q(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.callbacks&&this.callbacks.inputChanged({input:"saturation",valid:o,value:t.s,color:this.outputColor})}}onCyanInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.cmyk=this.cmyk||new S(0,0,0,0,0,!0),t&&(this.cmyk.c=e.v/e.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}}onMagentaInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.cmyk=this.cmyk||new S(0,0,0,0,0,!0),t&&(this.cmyk.m=e.v/e.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}}onYellowInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.cmyk=this.cmyk||new S(0,0,0,0,0,!0),t&&(this.cmyk.y=e.v/e.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}}onBlackInput(e){if(typeof e!="string"){let t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;this.cmyk=this.cmyk||new S(0,0,0,0,0,!0),t&&(this.cmyk.k=e.v/e.rg,this.updateColorPicker(!0,!0,!0)),this.callbacks&&this.callbacks.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}}onAddPresetColor(e){this.presetColors?.filter(t=>t==e).length||(this.presetColors=this.presetColors?.concat(e),this.callbacks&&this.callbacks.presetColorsChanged(this.presetColors))}onRemovePresetColor(e){this.presetColors=this.presetColors?.filter(t=>t!=e),this.callbacks&&this.callbacks.presetColorsChanged(this.presetColors)}openColorPicker(){this.show||(this.show=!0,this.callbacks&&this.callbacks.stateChanged(!0))}closeColorPicker(){this.show&&(this.show=!1,this.callbacks&&this.callbacks.stateChanged(!1),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,t=!0,o=!1){this.hsva=this.hsva||new M(0,0,0,0,!0),this.cmyk=this.cmyk||new S(0,0,0,0,0,!0),this.mode==L.grayscale&&(this.hsva.s=0);let a=this.outputColor,l=$(this.hsva);this.cmykEnabled&&(o?this.hsva=X(ze(this.cmyk)):this.cmyk=U(D(this.hsva)),this.sliderH=this.hsva.h);let g=new M(this.sliderH||this.hsva.h,1,1,1,!0),f=D(this.hsva);if(t){this.hslaText=Ze(l),this.rgbaText=ee(f),this.cmykEnabled&&(this.cmykText=Xe(this.cmyk));let Z=this.alphaChannel===y.always;this.hexText=je(f,Z),this.hexAlpha=this.rgbaText.a}this.outputFormat==I.auto&&this.hsva.a<1&&!Ot.has(this.format)&&(this.format=this.hsva.a<1?P.rgba:P.hex);let F=new M(this.hsva.h,this.hsva.s,this.hsva.v,0,this.hsva.normalized),G=new M(this.hsva.h,this.hsva.s,this.hsva.v,1,this.hsva.normalized);this.hueSliderColor=z(g,"auto","disabled"),this.alphaSliderColor="linear-gradient(to right, "+z(F,"auto","forced")+" 0%, "+z(G,"auto","disabled")+" 100%)",this.svSliderLight=J(f),this.hueSliderLight=J(D(g)),this.valueSliderLight=J(f),this.alphaSliderLight=Nt(f),this.outputColor=z(this.hsva,this.outputFormat,this.alphaChannel),this.selectedColor=z(this.hsva,I.rgba),this.format!==P.cmyk?this.cmykColor="":this.cmykColor=Dt(this.cmyk,this.alphaChannel),this.slider=new ie(this.sliderH||this.hsva.h,this.hsva.s,1-this.hsva.v,this.hsva.a),e&&a!=this.outputColor&&this.callbacks&&(this.cmykEnabled&&this.callbacks.cmykChanged(this.cmykColor),this.callbacks.colorChanged(this.outputColor))}fill(e){return new Array(e).fill(1)}formatAlpha(e){return e?.toFixed(2).replace(/\.?0+$/,"")}};r.\u0275fac=function(t){return new(t||r)(N(Y),N(Ie),N(Rt))},r.\u0275cmp=xe({type:r,selectors:[["nxt-color-picker"]],hostBindings:function(t,o){t&1&&C("keyup.esc",function(l){return o.onCancel(l)},B)("keyup.enter",function(l){return o.onAccept(l)},B)("mousedown",function(l){return o.onFocusChange(l)},B)("focusin",function(l){return o.onFocusChange(l)},B)},standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:@@nxt-color-picker.button.add-color:Add color to preset`;let t;t=$localize`:@@nxt-color-picker.preset-colors:Preset colors`;let o;o=$localize`:@@nxt-color-picker.button.remove-color:Remove Color`;let a;a=$localize`:@@nxt-color-picker.button.cancel:Cancel`;let l;return l=$localize`:@@nxt-color-picker.button.ok:OK`,[["formatSwitch",""],["stringLabel",""],t,a,l,["class","color-picker",3,"ngStyle","click",4,"ngIf"],[1,"color-picker",3,"click","ngStyle"],["class","color-picker__arrow",4,"ngIf"],["class","color-picker__sv","nxtSlider","",3,"rgX","rgY","ngStyle","newValue","dragStart","dragEnd",4,"ngIf"],[1,"color-picker__controls"],[1,"color-picker__selected"],[1,"color-picker__selected-color"],[3,"ngStyle"],["type","button","title",e,"class","color-picker__add-selected",3,"ngClass","click",4,"ngIf"],[1,"color-picker__hav"],["class","color-picker__slider color-picker__slider--hue","nxtSlider","",3,"rgX","newValue","dragStart","dragEnd",4,"ngIf"],["class","color-picker__slider color-picker__slider--value","nxtSlider","",3,"rgX","newValue","dragStart","dragEnd",4,"ngIf"],["class","color-picker__slider color-picker__slider--alpha","nxtSlider","",3,"rgX","newValue","dragStart","dragEnd",4,"ngIf"],["class","color-picker__inputs",4,"ngIf"],[4,"ngIf"],["class","color-picker__buttons",4,"ngIf"],[1,"color-picker__arrow"],["nxtSlider","",1,"color-picker__sv",3,"newValue","dragStart","dragEnd","rgX","rgY","ngStyle"],[1,"color-picker__cursor","color-picker__cursor--sv",3,"ngClass","ngStyle"],["type","button","title",e,1,"color-picker__add-selected",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],["d","M0 0h24v24H0z","fill","none"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--hue",3,"newValue","dragStart","dragEnd","rgX"],[1,"color-picker__cursor",3,"ngClass","ngStyle"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--value",3,"newValue","dragStart","dragEnd","rgX"],["nxtSlider","",1,"color-picker__slider","color-picker__slider--alpha",3,"newValue","dragStart","dragEnd","rgX"],[1,"color-picker__slider--alpha-bg",3,"ngStyle"],[1,"color-picker__inputs"],[1,"color-picker__input-fields"],[4,"ngIf","ngIfElse"],["class","color-picker__input-type",4,"ngIf"],[1,"color-picker__input-field"],["type","number","pattern","[0-9]*","min","0","max","100","nxtText","",3,"keyup.enter","newValue","rg","value"],[1,"color-picker__input-field-label"],["class","color-picker__input-field",4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.01","nxtText","",3,"keyup.enter","newValue","rg","value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","number","pattern","[0-9]*","min","0","max","360","nxtText","",3,"keyup.enter","newValue","rg","value"],["type","number","pattern","[0-9]*","min","0","max","255","nxtText","",3,"keyup.enter","newValue","rg","value"],["nxtText","",3,"blur","keyup.enter","newValue","value"],[1,"color-picker__input-type"],["tabindex","0",1,"color-picker__input-type-arrow",3,"click","keydown.enter"],[1,"color-picker__separator"],[1,"color-picker__preset"],["class","color-picker__preset-label",4,"ngIf"],["class","color-picker__preset-items",4,"ngIf"],[1,"color-picker__preset-label"],[1,"color-picker__preset-items"],[4,"ngFor","ngForOf"],["class","color-picker__preset-item",4,"ngFor","ngForOf"],["class","color-picker__preset-item","tabindex","0",3,"title","click","keydown.enter",4,"ngIf"],["tabindex","0",1,"color-picker__preset-item",3,"click","keydown.enter","title"],[1,"color-picker__preset-item-fill",3,"ngStyle"],["type","button","title",o,"class","color-picker__remove-selected","tabindex","0",3,"click","keydown.enter",4,"ngIf"],["type","button","title",o,"tabindex","0",1,"color-picker__remove-selected",3,"click","keydown.enter"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"color-picker__preset-item"],[1,"color-picker__buttons"],["type","button",3,"click",4,"ngIf"],["type","button",3,"click"]]},template:function(t,o){t&1&&x(0,Vt,15,17,"div",5),t&2&&c("ngIf",o.show)},dependencies:[Se,Ve,Oe,Fe,Te,Ee,De,Ht,Bt],styles:[".color-picker[_ngcontent-%COMP%]{position:relative;-webkit-user-select:none;user-select:none;background-color:#fff;box-shadow:0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f,0 5px 5px -3px #0003;display:flex;flex-direction:column}.color-picker[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;font-size:12px}.color-picker[_ngcontent-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{height:0;width:0;border-style:solid;position:absolute;z-index:999999}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor[_ngcontent-%COMP%]{cursor:pointer;position:absolute;border-radius:50%;width:16px;height:16px;border:#222222 solid 2px;margin:0 -8px;transition:border .2s linear}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor.color-picker__cursor--sv[_ngcontent-%COMP%]{margin:-8px}.color-picker[_ngcontent-%COMP%]   .color-picker__cursor.color-picker__cursor--light[_ngcontent-%COMP%]{border-color:#dadada}.color-picker[_ngcontent-%COMP%]   .color-picker__sv[_ngcontent-%COMP%]{position:relative;direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-image:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0);background-size:100% 100%}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:center}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]   .color-picker__selected[_ngcontent-%COMP%]{margin:4px;flex:48px 0 0}.color-picker[_ngcontent-%COMP%]   .color-picker__controls[_ngcontent-%COMP%]   .color-picker__hav[_ngcontent-%COMP%]{margin:-4px -4px -4px 0;flex:auto 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__selected-color[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:stretch;justify-content:stretch;border-radius:50%;background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat;box-shadow:0 0 8px -2px #00000080}.color-picker[_ngcontent-%COMP%]   .color-picker__selected-color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected[_ngcontent-%COMP%]{background:none;border:none;padding:0;width:100%;margin:0;color:#222;transition:color .2s linear;display:flex;align-items:center;justify-content:center;height:100%}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentcolor;width:24px;height:auto}.color-picker[_ngcontent-%COMP%]   .color-picker__add-selected.color-picker__add-selected--light[_ngcontent-%COMP%]{color:#dadada}.color-picker[_ngcontent-%COMP%]   .color-picker__hav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-picker[_ngcontent-%COMP%]   .color-picker__slider[_ngcontent-%COMP%]{width:100%;flex:100% 1 1;height:16px;margin:8px;position:relative}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--hue[_ngcontent-%COMP%]{background-size:100% 100%;background-image:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#f0f,red)}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--value[_ngcontent-%COMP%]{background-size:100% 100%;background-image:linear-gradient(to right,#000,#fff)}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--alpha[_ngcontent-%COMP%]{background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat}.color-picker[_ngcontent-%COMP%]   .color-picker__slider.color-picker__slider--alpha[_ngcontent-%COMP%]   .color-picker__slider--alpha-bg[_ngcontent-%COMP%]{position:absolute;inset:0}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:flex-start}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]{flex:auto 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__inputs[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]{flex:24px 0 0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]{display:flex}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]{margin:4px;display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center;flex:20% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;font-size:12px;height:24px;appearance:none;flex:100% 1 1;padding:1px;border:#999 solid 1px;width:100%;background:none;min-width:0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{box-shadow:none}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{appearance:none;margin:0}.color-picker[_ngcontent-%COMP%]   .color-picker__input-fields[_ngcontent-%COMP%]   .color-picker__input-field[_ngcontent-%COMP%]   .color-picker__input-field-label[_ngcontent-%COMP%]{flex:100% 1 1;display:block;text-align:center;margin-top:4px}.color-picker[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]{width:24px;height:24px;margin-top:4px;display:flex;flex-wrap:wrap;background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUwIDE2IDMwIDQ0IDcwIDQ0ICIvPjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iNTAgODQgNzAgNTYgMzAgNTYgIi8+PC9zdmc+);background-repeat:no-repeat;background-position:center}.color-picker[_ngcontent-%COMP%]   .color-picker__input-type[_ngcontent-%COMP%]   .color-picker__input-type-arrow[_ngcontent-%COMP%]{display:block;cursor:pointer;flex:100% 1 1;width:100%;height:50%}.color-picker[_ngcontent-%COMP%]   .color-picker__separator[_ngcontent-%COMP%]{border-top:1px solid #999;margin-left:8px;margin-right:8px;flex:100% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__preset[_ngcontent-%COMP%]{display:flex;margin:8px;align-items:center;flex-wrap:wrap}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-label[_ngcontent-%COMP%]{margin:4px;flex:100% 1 1}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]{display:flex;flex:100% 1 1;flex-wrap:wrap;align-items:flex-start}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]{position:relative;flex:20px 1 1;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-size:100% 100%;margin:4px;border-radius:4px;border:1px solid #999;cursor:pointer}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]   .color-picker__preset-item-fill[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:100%;border-radius:3px}.color-picker[_ngcontent-%COMP%]   .color-picker__preset-items[_ngcontent-%COMP%]   .color-picker__preset-item[_ngcontent-%COMP%]:empty{margin-top:0;margin-bottom:0;border-top:0;border-bottom:0}.color-picker[_ngcontent-%COMP%]   .color-picker__remove-selected[_ngcontent-%COMP%]{border:none;padding:0;margin:0;color:#222;transition:color .2s linear;align-items:center;justify-content:center;box-shadow:0 0 8px -2px #00000080;position:absolute;width:12px;height:12px;right:-6px;top:-6px;background:#fff;border-radius:50%;display:flex}.color-picker[_ngcontent-%COMP%]   .color-picker__remove-selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentcolor;width:100%;height:auto}.color-picker[_ngcontent-%COMP%]   .color-picker__buttons[_ngcontent-%COMP%]{display:flex;margin:0 8px 8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}.color-picker[_ngcontent-%COMP%]   .color-picker__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:auto 0 0;margin:4px;color:var(--nxt-color-picker-button-color, inherit);background:var(--nxt-color-picker-button-background, #dadada);padding:var(--nxt-color-picker-button-padding, 4px 8px);border:var(--nxt-color-picker-button-border, none);border-radius:var(--nxt-color-picker-button-border-radius, 4px);font-size:var(--nxt-color-picker-button-font-size, inherit);font-weight:var(--nxt-color-picker-button-font-weight, inherit)}.color-picker__arrow--top[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--top   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-bottom:16px}.color-picker__arrow--top[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--top   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:12px 6px;border-color:#999 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);left:12px;bottom:-24px}.color-picker__arrow--left[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--left   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-right:16px}.color-picker__arrow--left[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--left   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:6px 12px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #999;top:12px;left:230px}.color-picker__arrow--right[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--right   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-left:16px}.color-picker__arrow--right[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--right   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:6px 12px;border-color:rgba(0,0,0,0) #999 rgba(0,0,0,0) rgba(0,0,0,0);top:12px;left:-24px}.color-picker__arrow--bottom[_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%], .color-picker__arrow--bottom   [_nghost-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-top:16px}.color-picker__arrow--bottom[_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%], .color-picker__arrow--bottom   [_nghost-%COMP%]   .color-picker__arrow[_ngcontent-%COMP%]{border-width:12px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #999 rgba(0,0,0,0);top:-24px;left:12px}"]});let i=r;return i})(),ti=(()=>{let r=class r{get resIgnoredElements(){return(Array.isArray(this.ignoredElements)?this.ignoredElements:[this.ignoredElements]).filter(t=>!!t)}constructor(e,t,o,a,l){this.injector=e,this.appRef=t,this.vcRef=o,this.elRef=a,this.overlay=l,this.dialogCreated=!1,this.ignoreChanges=!1,this._callbacks={stateChanged:g=>{this.toggleChange.emit(g),g?this.open.emit(this.nxtColor):this.close.emit(this.nxtColor)},cmykChanged:(g,f=!0)=>{this.ignoreChanges=f,this.cmykColorChange.emit(g)},colorChanged:(g,f=!0)=>{this.ignoreChanges=f,this.nxtColorChange.emit(g)},colorSelectCanceled:()=>{this.colorSelectCancel.emit()},colorSelected:g=>{this.colorSelect.emit(g)},inputChanged:g=>{this.inputChange.emit(g)},sliderDragStart:g=>{this.sliderDragStart.emit(g)},sliderChanged:g=>{this.sliderChange.emit(g)},sliderDragEnd:g=>{this.sliderDragEnd.emit(g)},presetColorsChanged:g=>{this.presetColorsChange.emit(g)}},this.width="230px",this.height="auto",this.toggle=!1,this.disabled=!1,this.mode="color",this.cmykEnabled=!1,this.outputFormat=I.auto,this.alphaChannel=y.enabled,this.position=E.auto,this.positionOffset=0,this.presetLabel=!0,this.disableInput=!1,this.dialogDisplay=O.popup,this.saveClickOutside=!0,this.closeClickOutside=!0,this.okButton=!1,this.cancelButton=!1,this.presetColorsEditable=!1,this.useRootViewContainer=!1,this.open=new b(!0),this.close=new b(!0),this.inputChange=new b(!0),this.toggleChange=new b(!0),this.sliderDragStart=new b(!0),this.sliderChange=new b(!0),this.sliderDragEnd=new b(!0),this.colorSelect=new b(!0),this.colorSelectCancel=new b(!0),this.nxtColorChange=new b(!1),this.cmykColorChange=new b(!0),this.presetColorsChange=new b(!0)}handleOpen(e){let t=new Set(We(e)),o=this.resIgnoredElements.find(a=>t.has(a));!this.disabled&&!o&&this.openDialog()}handleInput(e){let t=((e?.target?.value||"")+"").trim();this.dialog?this.dialog.setColorFromString(t,!0):(this.nxtColor=t,this.nxtColorChange.emit(this.nxtColor))}ngOnDestroy(){this.dispose()}ngOnChanges(e){e.toggle&&!this.disabled&&(e.toggle.currentValue?this.openDialog():this.closeDialog()),e.nxtColor&&(this.dialog&&!this.ignoreChanges&&(this.dialogDisplay==O.inline&&this.dialog.setInitialColor(e.nxtColor.currentValue),this.dialog.setColorFromString(e.nxtColor.currentValue,!1),this.useRootViewContainer&&this.dialogDisplay!=O.inline&&this.cmpRef?.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.presetLabel||e.presetColors)&&this.dialog&&this.dialog.setPresetConfig(this.presetLabel,this.presetColors),e.dialogDisplay&&(this.dispose(),this.create()),(e.position||e.positionOffset)&&this.dialogDisplay==O.popup&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this.overlay.position().flexibleConnectedTo(this.elRef).withPositions(this.getPositions(this.positionOffset)))}openDialog(){this.dialogCreated?this.dialog&&(this.overlayRef&&!this.overlayRef.hasAttached()&&(this.cmpRef=this.overlayRef.attach(new le(ce,null,this.injector)),this.dialog=this.cmpRef.instance,this.setupDialog()),this.dialog.openDialog(this.nxtColor)):this.create()}closeDialog(){this.dialog&&this.dialogDisplay==O.popup&&this.dialog.closeDialog()}textColorMode(e=new v(1,1,1,1,!0),t=this.dialog?.rgbaText){typeof e=="string"&&(e=D(Q(e)??new M(1,1,1,1,!0)));let o=he(t||e,new v(e.r,e.g,e.b,1,e.normalized));return J(o)?"light":"dark"}dispose(){this.cmpRef&&this.cmpRef.destroy(),this.overlayRef&&this.overlayRef.dispose(),this.cmpRef=void 0,this.overlayRef=void 0,this.dialogCreated=!1}create(){let e=this.vcRef;if(this.dialogCreated=!0,this.useRootViewContainer&&this.dialogDisplay!=O.inline){let t=this.appRef.componentTypes[0],o=this.injector.get(t);e=o.vcRef||o.viewContainerRef||this.vcRef,e==this.vcRef&&console.warn("You are using useRootViewContainer, but the root component is not exposing viewContainerRef! Please expose it by adding 'vcRef: ViewContainerRef' to the constructor.")}if(this.dialogDisplay!=O.inline){let t=this.overlay.position().flexibleConnectedTo(this.elRef).withFlexibleDimensions(!1).withPush(!1).withPositions(this.getPositions(this.positionOffset));this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:this.overlay.scrollStrategies.reposition({autoClose:!0})}),this.cmpRef=this.overlayRef.attach(new le(ce,null,this.injector))}else this.cmpRef=e.createComponent(ce,{injector:this.injector,index:0});this.dialog=this.cmpRef.instance,this.setupDialog(),this.vcRef!=e&&this.cmpRef.changeDetectorRef.detectChanges()}setupDialog(){this.dialog?.setupDialog(ge(ue({},this),{callbacks:this._callbacks,elementRef:this.elRef,color:this.nxtColor}))}getPositions(e=0){let t=[],o=Array.isArray(this.position)?this.position:[this.position||E.auto],a=this.elRef.nativeElement.getBoundingClientRect(),l={[E.right]:{originX:"end",originY:"top",overlayX:"start",overlayY:"top",panelClass:"color-picker__arrow--right",offsetX:a.width*e},[E.left]:{originX:"start",originY:"top",overlayX:"end",overlayY:"top",panelClass:"color-picker__arrow--left",offsetX:-a.width*e},[E.top]:{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"color-picker__arrow--top",offsetY:-a.height*e},[E.bottom]:{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",panelClass:"color-picker__arrow--bottom",offsetY:a.height*e}},g=new Set;return o.forEach(f=>{!g.has(f)&&f in l&&(g.add(f),t.push(l[f]))}),o.find(f=>f==E.auto)&&[E.right,E.top,E.bottom,E.left].forEach(f=>{!g.has(f)&&f in l&&(g.add(f),t.push(l[f]))}),t}};r.\u0275fac=function(t){return new(t||r)(N(fe),N(be),N(ke),N(Y),N(Ae))},r.\u0275dir=W({type:r,selectors:[["","nxtColor",""]],hostBindings:function(t,o){t&1&&C("focus",function(l){return o.handleOpen(l)})("click",function(l){return o.handleOpen(l)})("input",function(l){return o.handleInput(l)})("change",function(l){return o.handleInput(l)})},inputs:{nxtColor:"nxtColor",width:"width",height:"height",toggle:"toggle",disabled:"disabled",mode:"mode",cmykEnabled:"cmykEnabled",outputFormat:"outputFormat",alphaChannel:"alphaChannel",fallbackColor:"fallbackColor",position:"position",positionOffset:"positionOffset",presetLabel:"presetLabel",presetColors:"presetColors",disableInput:"disableInput",dialogDisplay:"dialogDisplay",ignoredElements:"ignoredElements",saveClickOutside:"saveClickOutside",closeClickOutside:"closeClickOutside",okButton:"okButton",cancelButton:"cancelButton",presetColorsEditable:"presetColorsEditable",maxPresetColors:"maxPresetColors",useRootViewContainer:"useRootViewContainer"},outputs:{open:"open",close:"close",inputChange:"inputChange",toggleChange:"toggleChange",sliderDragStart:"sliderDragStart",sliderChange:"sliderChange",sliderDragEnd:"sliderDragEnd",colorSelect:"colorSelect",colorSelectCancel:"colorSelectCancel",nxtColorChange:"nxtColorChange",cmykColorChange:"cmykColorChange",presetColorsChange:"presetColorsChange"},exportAs:["nxtColorPicker"],standalone:!1,features:[ve]});let i=r;return i})(),ii=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=we({type:r}),r.\u0275inj=me({imports:[Ne,Re]});let i=r;return i})();export{S as a,Q as b,He as c,z as d,Dt as e,ti as f,ii as g};
