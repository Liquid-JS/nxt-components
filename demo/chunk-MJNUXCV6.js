import{i as X}from"./chunk-SQHVW6PR.js";import{$ as o,D as P,Dc as f,Ec as z,Gc as T,Hc as h,Qa as W,R as F,Rc as V,T as v,W as b,Z as U,aa as G,c as H,fc as N,g as A,ia as B,ja as q,ka as L,mb as p,ob as M,q as C,qa as u,ra as j,rc as D,sa as g,ta as w,va as I,xa as $}from"./chunk-I252HR53.js";import{a as S,b as R,i as r}from"./chunk-FBFWB55K.js";function fe(t){t||(t=o(L));let n=new H(e=>{if(t.destroyed){e.next();return}return t.onDestroy(e.next.bind(e))});return e=>e.pipe(F(n))}function J(t,n){let e=n?.injector??o(B),i=new A(1),s=g(()=>{let a;try{a=t()}catch(d){w(()=>i.error(d));return}w(()=>i.next(a))},{injector:e,manualCleanup:!0});return e.get(L).onDestroy(()=>{s.destroy(),i.complete()}),i.asObservable()}function me(t){return f(R(S({},t),{loader:void 0,stream:n=>{let e,i=()=>e?.unsubscribe();n.abortSignal.addEventListener("abort",i);let s=u({value:void 0}),a,d=new Promise(l=>a=l);function y(l){s.set(l),a?.(s),a=void 0}let _=t.stream??t.loader;if(_===void 0)throw new v(990,!1);return e=_(n).subscribe({next:l=>y({value:l}),error:l=>{y({error:z(l)}),n.abortSignal.removeEventListener("abort",i)},complete:()=>{a&&y({error:new v(991,!1)}),n.abortSignal.removeEventListener("abort",i)}}),d}}))}var Z=new U("NXT_HIGHLIGHT_OPTIONS");function ke(t){return G([{provide:Z,useValue:t}])}var c=(function(t){return t.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",t.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",t.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",t.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",t.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",t})(c||{}),ee=/\r\n|\r|\n/g,Y=(t={})=>{let n={children:[]};return Object.assign(n,t),n},k=class t{constructor(){this.rootNode=Y(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(n){this.top.children.push(n)}openNode(n){let e=Y({scope:n});this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,void 0,4)}walk(n){return this.constructor._walk(n,this.rootNode)}static _walk(n,e){return typeof e=="string"?n.addText(e):e.children&&(n.openNode(e),e.children.forEach(i=>this._walk(n,i)),n.closeNode(e)),n}static _collapse(n){typeof n!="string"&&n.children&&(n.children.every(e=>typeof e=="string")?n.children=[n.children.join("")]:n.children.forEach(e=>{t._collapse(e)}))}},E=class extends k{constructor(n){super(),this.options=n}addText(n){n!==""&&this.add(n)}startScope(n){this.openNode(n)}endScope(){this.closeNode()}__addSublanguage(n,e){let i=n.root;e&&(i.scope=`language:${e}`),this.add(i)}toHTML(){return new x(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}},K="</span>",Q=t=>!!t.scope,te=(t,{prefix:n})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){let e=t.split(".");return[`${n}${e.shift()}`,...e.map((i,s)=>`${i}${"_".repeat(s+1)}`)].join(" ")}return`${n}${t}`},x=class{constructor(n,e){this.buffer="",this.classPrefix=e.classPrefix,this.openStack=[],n.walk(this)}addText(n){let e=n.split(ee).map(ne),i=new Array(this.openStack.length).fill(K).join("")+`
`+this.openStack.join("");this.buffer+=e.join(i)}openNode(n){if(!Q(n))return;let e=te(n.scope,{prefix:this.classPrefix});this.span(e)}closeNode(n){Q(n)&&(this.buffer+=K,this.openStack.pop())}value(){return this.buffer}span(n){let e=`<span class="${n}">`;this.buffer+=e,this.openStack.push(e)}};function ne(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}var ie=(()=>{class t{get ready(){return C(this._ready$)}constructor(){this.document=o(q),this.options=o(Z,{optional:!0}),this.pendingTasks=o(j),this._t=this.pendingTasks.add(),this.hljs=f({loader:()=>this.loadLibrary().then(e=>r(this,null,function*(){if(this.options?.lineNumbersLoader){let i=yield this.options.lineNumbersLoader();e.lineNumbersBlock=i.activateLineNumbers(this.document)}return e.configure({__emitter:E}),this.options?.highlightOptions&&e.configure(this.options.highlightOptions),e})).finally(this._t)}).asReadonly(),this._ready$=J(this.hljs.value).pipe(P(e=>!!e)),this.options?.themePath&&this.loadTheme(this.options.themePath)}loadLibrary(){return r(this,null,function*(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)throw new Error(c.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)throw new Error(c.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)throw new Error(c.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)throw new Error(c.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.options.fullLibraryLoader();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.options.coreLibraryLoader().then(e=>this.loadLanguages(e))}throw new Error(c.NO_FULL_AND_NO_CORE_IMPORTS)})}loadLanguages(e){return r(this,null,function*(){return yield Promise.all(Object.entries(this.options?.languages||{}).map(([i,s])=>s().then(a=>e.registerLanguage(i,a)))),e})}setTheme(e){this.themeLinkElement?this.themeLinkElement.href=e:this.loadTheme(e)}loadTheme(e){this.themeLinkElement=this.document.createElement("link"),this.themeLinkElement.href=e,this.themeLinkElement.type="text/css",this.themeLinkElement.rel="stylesheet",this.themeLinkElement.media="screen,print",this.document.head.appendChild(this.themeLinkElement)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),se=(()=>{class t{constructor(){this.loader=o(ie),this.hljs=this.loader.hljs.value}highlight(e,i){return r(this,null,function*(){return(yield this.loader.ready).highlight(e,i)})}highlightAuto(e,i){return r(this,null,function*(){return(yield this.loader.ready).highlightAuto(e,i)})}highlightElement(e){return r(this,null,function*(){(yield this.loader.ready).highlightElement(e)})}highlightAll(){return r(this,null,function*(){(yield this.loader.ready).highlightAll()})}registerLanguage(e,i){return r(this,null,function*(){(yield this.loader.ready).registerLanguage(e,i)})}unregisterLanguage(e){return r(this,null,function*(){(yield this.loader.ready).unregisterLanguage(e)})}registerAliases(s,a){return r(this,arguments,function*(e,{languageName:i}){(yield this.loader.ready).registerAliases(e,{languageName:i})})}listLanguages(){return r(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(e){return r(this,null,function*(){return(yield this.loader.ready).getLanguage(e)})}safeMode(){return r(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return r(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(e,i){return r(this,null,function*(){(yield this.loader.ready).lineNumbersBlock(e,i)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),O;function re(){if(!O)try{O=window?.trustedTypes?.createPolicy("nxt-highlightjs",{createHTML:t=>t})}catch{}return O}function oe(t){return re()?.createHTML(t)||t}var m=(()=>{class t{constructor(){this.hljs=o(se),this.nativeElement=o($).nativeElement,this.sanitizer=o(X),g(()=>{let e=this.code();if(e){let i=this.highlightElement(e);i&&(this.setInnerHTML(i?.value??void 0),this.highlightResult.set(i),this.highlighted.emit(i))}else this.setTextContent("")})}setTextContent(e){this.nativeElement.textContent=e}setInnerHTML(e){this.nativeElement.innerHTML=oe(this.sanitizer.sanitize(W.HTML,e||null)||"")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=p({type:t})}}return t})(),Ee=(()=>{class t extends m{constructor(){super(...arguments),this.code=h(void 0,{alias:"nxtHighlightAuto"}),this.highlightResult=u(void 0),this.languages=h(),this.highlighted=T()}highlightElement(e){return this.hljs.hljs()?.highlightAuto(e,this.languages())}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=I(t)))(s||t)}})()}static{this.\u0275dir=p({type:t,selectors:[["","nxtHighlightAuto",""]],hostVars:2,hostBindings:function(i,s){i&2&&N("hljs",!0)},inputs:{code:[1,"nxtHighlightAuto","code"],languages:[1,"languages"]},outputs:{highlighted:"highlighted"},features:[D([{provide:m,useExisting:t}]),M]})}}return t})(),xe=(()=>{class t extends m{constructor(){super(...arguments),this.code=h(void 0,{alias:"nxtHighlight"}),this.highlightResult=u(void 0),this.language=h.required(),this.ignoreIllegals=h(void 0,{transform:V}),this.highlighted=T()}highlightElement(e){return this.hljs.hljs()?.highlight(e,{language:this.language(),ignoreIllegals:this.ignoreIllegals()})}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=I(t)))(s||t)}})()}static{this.\u0275dir=p({type:t,selectors:[["","nxtHighlight",""]],hostVars:2,hostBindings:function(i,s){i&2&&N("hljs",!0)},inputs:{code:[1,"nxtHighlight","code"],language:[1,"language"],ignoreIllegals:[1,"ignoreIllegals"]},outputs:{highlighted:"highlighted"},features:[D([{provide:m,useExisting:t}]),M]})}}return t})();export{fe as a,me as b,Z as c,ke as d,ie as e,se as f,m as g,Ee as h,xe as i};
