import{c as g,d as O}from"./chunk-BZKT67H7.js";import{d as h}from"./chunk-4Z5FXPY3.js";import{g as E}from"./chunk-UJLJK5TR.js";import{$ as o,N as I,W as y,Z as f,c as v,i as T,ja as F,nb as M,ra as D}from"./chunk-ZMGTPDVB.js";import{a as l,b as u,e as m}from"./chunk-FBFWB55K.js";var P=new f("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:x});function x(){let t=o(F)?.location,r=o(E,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:i=>{let e=(t?t.origin:"").replace(/\/+$/igm,"");if(i.startsWith("/"))return e+i;let n=r??e;return n&&(n+="/"),n+i}}}function j(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(t)}var G=new f("NXT_GIST_OPTIONS");var d=(()=>{class t{constructor(){this.http=o(O),this.options=o(G,{optional:!0}),this.pendingTasks=o(D)}getCodeFromGist(i){let e;return this.options?.clientId&&this.options?.clientSecret&&(e=new g().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${i}`,{params:e,responseType:"json"})}getCodeFromUrl(i){return this.fetchFile(i,{responseType:"text"})}fetchFile(i,e){return j(i)?this.http.get(i,e).pipe(n=>new v(a=>{let c=this.pendingTasks.add(),s=n.subscribe({next:p=>{a.next(p),c()},error:p=>{a.error(p),console.log(p),c()},complete:()=>a.complete()});return s.add(()=>c()),s}),I(1)):T}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function V(t,r={}){let c=r,{formatUrl:i}=c,e=m(c,["formatUrl"]),n=e?.injector?e.injector.get(d):o(d),a=e?.injector?e.injector.get(P):o(P);return h(u(l({},e),{params:()=>{let s=typeof t=="string"?t:t();return j(s)?s:a.formatPathname(s)},stream:({params:s})=>n.fetchFile(s,{responseType:"text"})}))}function W(t,r){let i=r?.injector?r.injector.get(d):o(d);return h(u(l({},r),{params:()=>typeof t=="string"?t:t(),stream:({params:e})=>{let n;return i.options?.clientId&&i.options?.clientSecret&&(n=new g().set("client_id",i.options.clientId).set("client_secret",i.options.clientSecret)),i.fetchFile(`https://api.github.com/gists/${e}`,{params:n,responseType:"json"})}}))}var q=(()=>{class t{transform(i,e){if(e)return i?.files?.[e]}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275pipe=M({name:"gistFile",type:t,pure:!0})}}return t})();export{V as a,W as b,q as c};
