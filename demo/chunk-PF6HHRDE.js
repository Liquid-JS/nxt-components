import{c as v,d as F}from"./chunk-LJSWQFF5.js";import{g as m}from"./chunk-OWF3LYDB.js";import{Cc as g,L as a,U as u,X as o,Z as s,h as p,ha as f,ka as r,kb as l,lb as c,pa as h}from"./chunk-Q24A7GIH.js";var y=new o("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:D});function D(){let t=s(f)?.location,d=s(m,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:e=>{let i=(t?t.origin:"").replace(/\/+$/igm,"");if(e.startsWith("/"))return i+e;let n=d??i;return n&&(n+="/"),n+e}}}function I(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(t)}var M=new o("NXT_GIST_OPTIONS");var T=(()=>{class t{constructor(){this.http=s(F),this.options=s(M,{optional:!0})}getCodeFromGist(e){let i;return this.options?.clientId&&this.options?.clientSecret&&(i=new v().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${e}`,{params:i,responseType:"json"})}getCodeFromUrl(e){return this.fetchFile(e,{responseType:"text"})}fetchFile(e,i){return I(e)?this.http.get(e,i).pipe(a(1)):p}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),j=(()=>{class t{constructor(){this.location=s(y),this.loader=s(T)}transform(e){return this.loader.getCodeFromUrl(I(e)?e:this.location.formatPathname(e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=c({name:"codeFromUrl",type:t,pure:!0})}}return t})(),R=(()=>{class t{constructor(){this.loader=s(T),this.pendingTasks=s(h),this.cdRef=s(g),this.gistLoad=new r,this.gistError=new r}set gist(e){if(this.subscription?.unsubscribe(),this.subscription=void 0,e){let i=this.pendingTasks.add();this.subscription=this.loader.getCodeFromGist(e).subscribe({next:n=>{this.gistLoad.emit(n),this.cdRef.detectChanges(),i()},error:n=>{this.gistError.emit(n),this.cdRef.detectChanges(),i()}})}}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=void 0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=l({type:t,selectors:[["","nxtGist",""]],inputs:{gist:[0,"nxtGist","gist"]},outputs:{gistLoad:"gistLoad",gistError:"gistError"}})}}return t})(),A=(()=>{class t{transform(e,i){if(i)return e?.files?.[i]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=c({name:"gistFile",type:t,pure:!0})}}return t})();export{j as a,R as b,A as c};
