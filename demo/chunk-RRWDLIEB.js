import{i as q}from"./chunk-BH4VPJQI.js";import{$ as A,Gc as G,Pa as H,T as S,V as m,Y as v,Z as R,_b as j,ba as a,c as x,ca as _,gb as F,hb as p,jb as w,jc as I,l as D,ma as C,na as g,qa as h,sa as b,ua as L,vc as U,wa as P,wc as T,yc as k,zc as c}from"./chunk-RGBXINVR.js";import{i as o}from"./chunk-FBFWB55K.js";function ye(n){n||(n=a(g));let e=new x(s=>{if(n.destroyed){s.next();return}return n.onDestroy(s.next.bind(s))});return s=>s.pipe(S(e))}function B(n,e){let t=!e?.manualCleanup?e?.injector?.get(g)??a(g):null,i=X(e?.equal),r;e?.requireSync?r=h({kind:0},{equal:i}):r=h({kind:1,value:e?.initialValue},{equal:i});let d,y=n.subscribe({next:l=>r.set({kind:1,value:l}),error:l=>{r.set({kind:2,error:l}),d?.()},complete:()=>{d?.()}});if(e?.requireSync&&r().kind===0)throw new m(601,!1);return d=t?.onDestroy(y.unsubscribe.bind(y)),U(()=>{let l=r();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new m(601,!1)}},{equal:e?.equal})}function X(n=Object.is){return(e,s)=>e.kind===1&&s.kind===1&&n(e.value,s.value)}var V=new A("NXT_HIGHLIGHT_OPTIONS");function Me(n){return _([{provide:V,useValue:n}])}var u=(function(n){return n.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",n.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",n.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",n.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",n.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",n})(u||{}),Y=/\r\n|\r|\n/g,W=(n={})=>{let e={children:[]};return Object.assign(e,n),e},M=class n{constructor(){this.rootNode=W(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){let s=W({scope:e});this.add(s),this.stack.push(s)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,s){return typeof s=="string"?e.addText(s):s.children&&(e.openNode(s),s.children.forEach(t=>this._walk(e,t)),e.closeNode(s)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(s=>typeof s=="string")?e.children=[e.children.join("")]:e.children.forEach(s=>{n._collapse(s)}))}},O=class extends M{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,s){let t=e.root;s&&(t.scope=`language:${s}`),this.add(t)}toHTML(){return new N(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}},$="</span>",z=n=>!!n.scope,J=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){let s=n.split(".");return[`${e}${s.shift()}`,...s.map((t,i)=>`${t}${"_".repeat(i+1)}`)].join(" ")}return`${e}${n}`},N=class{constructor(e,s){this.buffer="",this.classPrefix=s.classPrefix,this.openStack=[],e.walk(this)}addText(e){let s=e.split(Y).map(K),t=new Array(this.openStack.length).fill($).join("")+`
`+this.openStack.join("");this.buffer+=s.join(t)}openNode(e){if(!z(e))return;let s=J(e.scope,{prefix:this.classPrefix});this.span(s)}closeNode(e){z(e)&&(this.buffer+=$,this.openStack.pop())}value(){return this.buffer}span(e){let s=`<span class="${e}">`;this.buffer+=s,this.openStack.push(s)}};function K(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}var Q=(()=>{let e=class e{constructor(){this.document=a(C),this.options=a(V,{optional:!0}),this.pendingTasks=a(b),this._t=this.pendingTasks.add(),this.ready=this.loadLibrary().then(t=>o(this,null,function*(){if(this.options?.lineNumbersLoader){let i=yield this.options.lineNumbersLoader();t.lineNumbersBlock=i.activateLineNumbers(this.document)}return t.configure({__emitter:O}),this.options?.highlightOptions&&t.configure(this.options.highlightOptions),t})).finally(this._t),this.options?.themePath&&this.loadTheme(this.options.themePath)}loadLibrary(){return o(this,null,function*(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)throw new Error(u.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)throw new Error(u.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)throw new Error(u.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)throw new Error(u.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.options.fullLibraryLoader();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.options.coreLibraryLoader().then(t=>this.loadLanguages(t))}throw new Error(u.NO_FULL_AND_NO_CORE_IMPORTS)})}loadLanguages(t){return o(this,null,function*(){return yield Promise.all(Object.entries(this.options?.languages||{}).map(([i,r])=>r().then(d=>t.registerLanguage(i,d)))),t})}setTheme(t){this.themeLinkElement?this.themeLinkElement.href=t:this.loadTheme(t)}loadTheme(t){this.themeLinkElement=this.document.createElement("link"),this.themeLinkElement.href=t,this.themeLinkElement.type="text/css",this.themeLinkElement.rel="stylesheet",this.themeLinkElement.media="screen,print",this.document.head.appendChild(this.themeLinkElement)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Z=(()=>{let e=class e{constructor(){this.loader=a(Q),this.hljs=B(D(this.loader.ready))}highlight(t,i){return o(this,null,function*(){return(yield this.loader.ready).highlight(t,i)})}highlightAuto(t,i){return o(this,null,function*(){return(yield this.loader.ready).highlightAuto(t,i)})}highlightElement(t){return o(this,null,function*(){(yield this.loader.ready).highlightElement(t)})}highlightAll(){return o(this,null,function*(){(yield this.loader.ready).highlightAll()})}registerLanguage(t,i){return o(this,null,function*(){(yield this.loader.ready).registerLanguage(t,i)})}unregisterLanguage(t){return o(this,null,function*(){(yield this.loader.ready).unregisterLanguage(t)})}registerAliases(r,d){return o(this,arguments,function*(t,{languageName:i}){(yield this.loader.ready).registerAliases(t,{languageName:i})})}listLanguages(){return o(this,null,function*(){return(yield this.loader.ready).listLanguages()})}getLanguage(t){return o(this,null,function*(){return(yield this.loader.ready).getLanguage(t)})}safeMode(){return o(this,null,function*(){(yield this.loader.ready).safeMode()})}debugMode(){return o(this,null,function*(){(yield this.loader.ready).debugMode()})}lineNumbersBlock(t,i){return o(this,null,function*(){let r=yield this.loader.ready;r.lineNumbersBlock&&r.lineNumbersBlock(t,i)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),E;function ee(){if(!E)try{E=window?.trustedTypes?.createPolicy("nxt-highlightjs",{createHTML:n=>n})}catch{}return E}function te(n){return ee()?.createHTML(n)||n}var f=(()=>{let e=class e{constructor(){this.hljs=a(Z),this.nativeElement=a(P).nativeElement,this.sanitizer=a(q),T(()=>{let t=this.code();if(t){let i=this.highlightElement(t);i&&(this.setInnerHTML(i?.value??void 0),this.highlightResult.set(i),this.highlighted.emit(i))}else this.setTextContent("")})}setTextContent(t){this.nativeElement.textContent=t}setInnerHTML(t){this.nativeElement.innerHTML=te(this.sanitizer.sanitize(H.HTML,t||null)||"")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=p({type:e});let n=e;return n})(),Oe=(()=>{let e=class e extends f{constructor(){super(...arguments),this.code=c(void 0,{alias:"nxtHighlightAuto"}),this.highlightResult=h(void 0),this.languages=c(),this.highlighted=k()}highlightElement(t){return this.hljs.hljs()?.highlightAuto(t,this.languages())}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=L(e)))(r||e)}})(),e.\u0275dir=p({type:e,selectors:[["","nxtHighlightAuto",""]],hostVars:2,hostBindings:function(i,r){i&2&&j("hljs",!0)},inputs:{code:[1,"nxtHighlightAuto","code"],languages:[1,"languages"]},outputs:{highlighted:"highlighted"},features:[I([{provide:f,useExisting:e}]),w]});let n=e;return n})(),Ne=(()=>{let e=class e extends f{constructor(){super(...arguments),this.code=c(void 0,{alias:"nxtHighlight"}),this.highlightResult=h(void 0),this.language=c.required(),this.ignoreIllegals=c(void 0,{transform:G}),this.highlighted=k()}highlightElement(t){return this.hljs.hljs()?.highlight(t,{language:this.language(),ignoreIllegals:this.ignoreIllegals()})}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=L(e)))(r||e)}})(),e.\u0275dir=p({type:e,selectors:[["","nxtHighlight",""]],hostVars:2,hostBindings:function(i,r){i&2&&j("hljs",!0)},inputs:{code:[1,"nxtHighlight","code"],language:[1,"language"],ignoreIllegals:[1,"ignoreIllegals"]},outputs:{highlighted:"highlighted"},features:[I([{provide:f,useExisting:e}]),w]});let n=e;return n})(),xe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=F({type:e}),e.\u0275inj=R({});let n=e;return n})();export{ye as a,V as b,Me as c,Q as d,Z as e,f,Oe as g,Ne as h,xe as i};
