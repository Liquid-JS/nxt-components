import{a as g,b as l}from"./chunk-XHE7RL6G.js";import{Jc as f,R as p,Z as a,aa as o,da as n,i as d,ob as h,pb as c,ua as u,va as r}from"./chunk-JSDYMTJZ.js";var I=new o("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:T});function T(){let t=n(f)?.location;return{getPathname:()=>t?t.origin:""}}function m(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(t)}var y=new o("NXT_GIST_OPTIONS");var v=(()=>{class t{constructor(){this.http=n(l),this.options=n(y,{optional:!0})}getCodeFromGist(e){let i;return this.options?.clientId&&this.options?.clientSecret&&(i=new g().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${e}`,{params:i,responseType:"json"})}getCodeFromUrl(e){return this.fetchFile(e,{responseType:"text"})}fetchFile(e,i){return m(e)?this.http.get(e,i).pipe(p(1)):d}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),x=(()=>{class t{constructor(){this.location=n(I),this.loader=n(v)}transform(e){return this.loader.getCodeFromUrl(m(e)?e:`${this.location.getPathname()}/${e}`)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=c({name:"codeFromUrl",type:t,pure:!0})}}return t})(),j=(()=>{class t{constructor(){this.loader=n(v),this.pendingTasks=n(u),this.gistLoad=new r,this.gistError=new r}set gist(e){if(this.subscription?.unsubscribe(),this.subscription=void 0,e){let i=this.pendingTasks.add();this.subscription=this.loader.getCodeFromGist(e).subscribe({next:s=>{i(),this.gistLoad.emit(s)},error:s=>{i(),this.gistError.emit(s)}})}}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=void 0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=h({type:t,selectors:[["","nxtGist",""]],inputs:{gist:[0,"nxtGist","gist"]},outputs:{gistLoad:"gistLoad",gistError:"gistError"}})}}return t})(),S=(()=>{class t{transform(e,i){if(i)return e?.files?.[i]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=c({name:"gistFile",type:t,pure:!0})}}return t})();export{x as a,j as b,S as c};
