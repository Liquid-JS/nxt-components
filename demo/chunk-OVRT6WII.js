import{c as g,d as G}from"./chunk-BZKT67H7.js";import{d as h}from"./chunk-4Z5FXPY3.js";import{g as D}from"./chunk-UJLJK5TR.js";import{$ as n,N as T,W as y,Z as f,c as v,i as F,ja as I,nb as P,ra as M}from"./chunk-ZMGTPDVB.js";import{a as l,b as u,e as m}from"./chunk-FBFWB55K.js";var x=new f("NXT_HIGHLIGHT_FILE_LOCATION",{providedIn:"root",factory:O});function O(){let t=n(I)?.location,r=n(D,{optional:!0})?.replace(/\/+$/igm,"");return{formatPathname:i=>{let e=(t?t.origin:"").replace(/\/+$/igm,"");if(i.startsWith("/"))return e+i;let o=r??e;return o&&(o+="/"),o+i}}}function E(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!]))?/.test(t)}var j=new f("NXT_GIST_OPTIONS");var d=(()=>{class t{constructor(){this.http=n(G),this.options=n(j,{optional:!0}),this.pendingTasks=n(M)}getCodeFromGist(i){let e;return this.options?.clientId&&this.options?.clientSecret&&(e=new g().set("client_id",this.options.clientId).set("client_secret",this.options.clientSecret)),this.fetchFile(`https://api.github.com/gists/${i}`,{params:e,responseType:"json"})}getCodeFromUrl(i){return this.fetchFile(i,{responseType:"text"})}fetchFile(i,e){return E(i)?this.http.get(i,e).pipe(o=>new v(a=>{let c=this.pendingTasks.add(),s=o.subscribe({next:p=>{a.next(p),c()},error:p=>{a.error(p),console.log(p),c()},complete:()=>a.complete()});return s.add(()=>c()),s}),T(1)):F}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function V(t,r={}){let c=r,{formatUrl:i}=c,e=m(c,["formatUrl"]),o=e?.injector?e.injector.get(d):n(d),a=e?.injector?e.injector.get(x):n(x);return h(u(l({},e),{params:()=>{let s=typeof t=="string"?t:t();return E(s)?s:a.formatPathname(s)},stream:({params:s})=>o.fetchFile(s,{responseType:"text"})}))}function W(t,r){let i=r?.injector?r.injector.get(d):n(d);return h(u(l({},r),{params:()=>typeof t=="string"?t:t(),stream:({params:e})=>{let o;return i.options?.clientId&&i.options?.clientSecret&&(o=new g().set("client_id",i.options.clientId).set("client_secret",i.options.clientSecret)),i.fetchFile(`https://api.github.com/gists/${e}`,{params:o,responseType:"json"})}}))}var q=(()=>{class t{transform(i,e){if(e)return i?.files?.[e]}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275pipe=P({name:"gistFile",type:t,pure:!0})}}return t})();export{V as a,W as b,q as c};
