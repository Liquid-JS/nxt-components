<div [cdkTrapFocus]="pickerMode() !== 'inline'"
    [@fadeInPicker]="pickerMode() === 'inline'? '' : 'enter'"
    class="nxt-dt-container-inner">

    @if (pickerType() === 'both' || pickerType() === 'calendar') {
    <nxt-date-time-calendar class="nxt-dt-container-row"
        [firstDayOfWeek]="firstDayOfWeek() ?? 0"
        [(pickerMoment)]="pickerMoment"
        [selected]="selected()"
        [selecteds]="selecteds() ?? []"
        [selectMode]="selectMode()"
        [min]="min()"
        [max]="max()"
        [dateTimeFilter]="dateTimeFilter()"
        [startView]="startView() ?? 'month'"
        [hideOtherMonths]="!!hideOtherMonths()"
        (yearSelected)="picker()?.selectYear($event)"
        (monthSelected)="picker()?.selectMonth($event)"
        (selectedChange)="dateSelected($event)"></nxt-date-time-calendar>
    }

    @if (pickerType() === 'both' || pickerType() === 'timer') {
    <nxt-date-time-timer class="nxt-dt-container-row"
        [pickerMoment]="pickerMoment"
        [min]="min()"
        [max]="max()"
        [showSecondsTimer]="!!showSecondsTimer()"
        [hour12Timer]="!!hour12Timer()"
        [stepHour]="stepHour() ?? 1"
        [stepMinute]="stepMinute() ?? 1"
        [stepSecond]="stepSecond() ?? 1"
        (selectedChange)="timeSelected($event)"></nxt-date-time-timer>
    }

    @if (isInRangeMode()) {
    <div role="radiogroup"
        class="nxt-dt-container-info nxt-dt-container-row">
        <div role="radio"
            [tabindex]="activeSelectedIndex() === 0 ? 0 : -1"
            [attr.aria-checked]="activeSelectedIndex() === 0"
            class="nxt-dt-control nxt-dt-container-range nxt-dt-container-from"
            [class.nxt-dt-container-info-active]="activeSelectedIndex() === 0"
            (click)="handleClickOnInfoGroup($event, 0)"
            (keydown)="handleKeydownOnInfoGroup($event, to, 0)"
            #from>
            <span class="nxt-dt-control-content nxt-dt-container-range-content"
                tabindex="-1">
                <span class="nxt-dt-container-info-label">{{fromLabel()}}:</span>
                <span class="nxt-dt-container-info-value">{{fromFormattedValue()}}</span>
            </span>
        </div>
        <div role="radio"
            [tabindex]="activeSelectedIndex() === 1 ? 0 : -1"
            [attr.aria-checked]="activeSelectedIndex() === 1"
            class="nxt-dt-control nxt-dt-container-range nxt-dt-container-to"
            [class.nxt-dt-container-info-active]="activeSelectedIndex() === 1"
            (click)="handleClickOnInfoGroup($event, 1)"
            (keydown)="handleKeydownOnInfoGroup($event, from, 1)"
            #to>
            <span class="nxt-dt-control-content nxt-dt-container-range-content"
                tabindex="-1">
                <span class="nxt-dt-container-info-label">{{toLabel()}}:</span>
                <span class="nxt-dt-container-info-value">{{toFormattedValue()}}</span>
            </span>
        </div>
    </div>
    }

    @if (showControlButtons()) {
    <div class="nxt-dt-container-buttons nxt-dt-container-row">
        <button class="nxt-dt-control nxt-dt-control-button nxt-dt-container-control-button"
            type="button"
            tabindex="0"
            (click)="onCancelClicked($event)">
            <span class="nxt-dt-control-content nxt-dt-control-button-content"
                tabindex="-1">
                {{cancelLabel()}}
            </span>
        </button>
        <button class="nxt-dt-control nxt-dt-control-button nxt-dt-container-control-button"
            type="button"
            tabindex="0"
            (click)="onSetClicked($event)">
            <span class="nxt-dt-control-content nxt-dt-control-button-content"
                tabindex="-1">
                {{setLabel()}}
            </span>
        </button>
    </div>
    }
</div>
